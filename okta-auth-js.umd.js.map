{"version":3,"sources":["webpack://OktaAuth/webpack/universalModuleDefinition","webpack://OktaAuth/webpack/bootstrap","webpack://OktaAuth/./lib/OktaAuthBase.ts","webpack://OktaAuth/./lib/PromiseQueue.ts","webpack://OktaAuth/./lib/TokenManager.ts","webpack://OktaAuth/./lib/browser/browser.ts","webpack://OktaAuth/./lib/browser/browserStorage.ts","webpack://OktaAuth/./lib/browser/features.ts","webpack://OktaAuth/./lib/browser/fingerprint.ts","webpack://OktaAuth/./lib/browser/index.ts","webpack://OktaAuth/./lib/builderUtil.ts","webpack://OktaAuth/./lib/clock.ts","webpack://OktaAuth/./lib/constants.ts","webpack://OktaAuth/./lib/crypto.ts","webpack://OktaAuth/./lib/errors/AuthApiError.ts","webpack://OktaAuth/./lib/errors/AuthPollStopError.ts","webpack://OktaAuth/./lib/errors/AuthSdkError.ts","webpack://OktaAuth/./lib/errors/CustomError.ts","webpack://OktaAuth/./lib/errors/OAuthError.ts","webpack://OktaAuth/./lib/errors/index.ts","webpack://OktaAuth/./lib/fetch/fetchRequest.ts","webpack://OktaAuth/./lib/http.ts","webpack://OktaAuth/./lib/oauthUtil.ts","webpack://OktaAuth/./lib/pkce.ts","webpack://OktaAuth/./lib/session.ts","webpack://OktaAuth/./lib/storageBuilder.ts","webpack://OktaAuth/./lib/token.ts","webpack://OktaAuth/./lib/tx/AuthTransaction.ts","webpack://OktaAuth/./lib/tx/TransactionState.ts","webpack://OktaAuth/./lib/tx/api.ts","webpack://OktaAuth/./lib/tx/index.ts","webpack://OktaAuth/./lib/tx/poll.ts","webpack://OktaAuth/./lib/tx/util.ts","webpack://OktaAuth/./lib/types/Cookies.ts","webpack://OktaAuth/./lib/types/JWT.ts","webpack://OktaAuth/./lib/types/OAuth.ts","webpack://OktaAuth/./lib/types/OktaAuthOptions.ts","webpack://OktaAuth/./lib/types/Storage.ts","webpack://OktaAuth/./lib/types/Token.ts","webpack://OktaAuth/./lib/types/UserClaims.ts","webpack://OktaAuth/./lib/types/api.ts","webpack://OktaAuth/./lib/types/index.ts","webpack://OktaAuth/./lib/util.ts","webpack://OktaAuth/./node_modules/@babel/runtime/helpers/assertThisInitialized.js","webpack://OktaAuth/./node_modules/@babel/runtime/helpers/classCallCheck.js","webpack://OktaAuth/./node_modules/@babel/runtime/helpers/construct.js","webpack://OktaAuth/./node_modules/@babel/runtime/helpers/createClass.js","webpack://OktaAuth/./node_modules/@babel/runtime/helpers/getPrototypeOf.js","webpack://OktaAuth/./node_modules/@babel/runtime/helpers/inherits.js","webpack://OktaAuth/./node_modules/@babel/runtime/helpers/isNativeFunction.js","webpack://OktaAuth/./node_modules/@babel/runtime/helpers/isNativeReflectConstruct.js","webpack://OktaAuth/./node_modules/@babel/runtime/helpers/possibleConstructorReturn.js","webpack://OktaAuth/./node_modules/@babel/runtime/helpers/setPrototypeOf.js","webpack://OktaAuth/./node_modules/@babel/runtime/helpers/typeof.js","webpack://OktaAuth/./node_modules/@babel/runtime/helpers/wrapNativeSuper.js","webpack://OktaAuth/./node_modules/@babel/runtime/regenerator/index.js","webpack://OktaAuth/./node_modules/cross-fetch/dist/browser-ponyfill.js","webpack://OktaAuth/./node_modules/js-cookie/src/js.cookie.js","webpack://OktaAuth/./node_modules/regenerator-runtime/runtime.js","webpack://OktaAuth/./node_modules/tiny-emitter/index.js"],"names":["OktaAuthBase","args","assertValidConfig","options","issuer","removeTrailingSlash","httpRequestClient","transformErrorXHR","storageUtil","headers","tx","status","transactionStatus","bind","resume","resumeTransaction","exists","Object","assign","transactionExists","_get","name","storage","get","introspect","opts","postToTransaction","split","PromiseQueue","queue","running","Array","prototype","slice","call","arguments","method","thisObject","Promise","resolve","reject","push","run","length","queueItem","shift","res","apply","isPromise","then","finally","DEFAULT_OPTIONS","autoRenew","expireEarlySeconds","getExpireTime","tokenMgmtRef","token","expireTime","expiresAt","hasExpired","clock","now","emitExpired","key","emitter","emit","emitRemoved","emitError","error","clearExpireEventTimeout","clearTimeout","expireTimeouts","renewPromise","clearExpireEventTimeoutAll","hasOwnProperty","setExpireEventTimeout","sdk","expireEventWait","Math","max","expireEventTimeout","setTimeout","setExpireEventTimeoutAll","tokenStorage","getStorage","e","add","isObject","scopes","isIDToken","isAccessToken","AuthSdkError","setStorage","getAsync","remove","renew","existingPromise","freshToken","oldToken","catch","err","tokenKey","accessToken","clear","clearStorage","shouldThrottleRenew","renewTimeQueue","Date","firstTime","lastTime","TokenManager","removeNils","browserHasLocalStorage","warn","browserHasSessionStorage","storageProvider","localStorage","sessionStorage","getCookieStorage","getItem","data","value","keys","forEach","k","indexOf","replace","JSON","parse","stringify","setItem","existingValues","storageKey","valueToStore","delete","cookies","getInMemoryStorage","TOKEN_STORAGE_NAME","storageBuilder","SdkClock","create","on","off","onTokenExpiredHandler","__awaiter","thisArg","_arguments","P","generator","adopt","fulfilled","step","next","rejected","result","done","Emitter","require","OktaAuthBrowser","fetchRequest","browserStorage","cookieSettings","secure","isLocalhost","features","isHTTPS","sameSite","console","clientId","authorizeUrl","userinfoUrl","tokenUrl","revokeUrl","logoutUrl","pkce","redirectUri","postLogoutRedirectUri","responseMode","userAgent","getUserAgent","SDK_VERSION","maxClockSkew","DEFAULT_MAX_CLOCK_SKEW","ignoreSignature","session","close","closeSession","sessionExists","getSession","refresh","refreshSession","setCookieAndRedirect","_tokenQueue","getWithoutPrompt","getWithPopup","getWithRedirect","parseFromUrl","decode","decodeToken","revoke","revokeToken","renewToken","getUserInfo","verify","verifyToken","isLoginRedirect","syncMethods","_setLocation","url","window","location","_getHistory","history","_getLocation","_getDocument","document","fingerprint","tokenManager","clone","_postToTransaction","sendFingerprint","errorCode","ACCESS_TOKEN_STORAGE_KEY","defaultUri","origin","currentUri","href","revokeAccessToken","idToken","getOAuthUrls","ID_TOKEN_STORAGE_KEY","reload","state","idTokenHint","logoutUri","encodeURIComponent","toQueryString","http","Cookies","getLocalStorage","testStorage","getSessionStorage","getPKCEStorage","preferLocalStorage","PKCE_STORAGE_NAME","getHttpCache","CACHE_STORAGE_NAME","set","store","removeItem","cookieOptions","path","expires","isWindowsPhone","navigator","isFingerprintSupported","agent","test","isPopupPostMessageSupported","isIE8or9","documentMode","postMessage","isTokenVerifySupported","crypto","subtle","Uint8Array","hasTextEncoder","TextEncoder","isPKCESupported","protocol","hostname","timeout","iframe","listener","promise","createElement","style","display","getIssuerOrigin","msg","type","source","addListener","src","body","appendChild","removeListener","contains","parentElement","removeChild","isUrlRegex","RegExp","userAgentTemplateWithNoPlaceholder","template","sdkValue","localOffset","parseInt","STATE_TOKEN_KEY_NAME","DEFAULT_POLLING_DELAY","DEFAULT_CACHE_DURATION","REDIRECT_OAUTH_PARAMS_NAME","REDIRECT_STATE_COOKIE_NAME","REDIRECT_NONCE_COOKIE_NAME","getOidcHash","str","buffer","encode","digest","arrayBuffer","intBuffer","firstHalf","hash","String","fromCharCode","b64u","stringToBase64Url","format","algo","extractable","usages","use","importKey","cryptoKey","jwt","payload","stringToBuffer","b64Signature","base64UrlDecode","signature","AuthApiError","xhr","message","errorSummary","errorLink","errorId","errorCauses","CustomError","AuthPollStopError","setPrototypeOf","Error","OAuthError","summary","readData","response","toLowerCase","json","text","formatResult","responseText","responseType","responseJSON","contentType","fetchPromise","fetch","credentials","withCredentials","ok","httpRequest","saveAuthnState","httpCache","cacheResponse","cacheContents","cachedResponse","isString","ajaxOptions","undefined","resp","stateToken","updateStorage","floor","serverErr","isAbsoluteUrl","getOptions","post","postOptions","generateState","genRandomString","generateNonce","eventTarget","fn","addEventListener","attachEvent","removeEventListener","detachEvent","loadFrame","loadPopup","title","popupTitle","appearance","isIE11OrLess","winEl","open","getWellKnown","authServerUri","getKey","kid","wellKnown","jwksUri","cachedKey","find","validateClaims","claims","validationParams","aud","iss","nonce","iat","exp","baseUrl","urlParamsToObject","hashOrSearch","plus2space","paramSplit","fragment","charAt","substring","obj","param","exec","decodeURIComponent","hasTokensInHash","hasCodeInUrl","authParams","search","MIN_VERIFIER_LENGTH","MAX_VERIFIER_LENGTH","DEFAULT_CODE_CHALLENGE_METHOD","dec2hex","dec","toString","substr","getRandomString","a","ceil","getRandomValues","from","join","generateVerifier","prefix","verifier","saveMeta","meta","codeVerifier","clearMeta","loadMeta","computeChallenge","validateOptions","authorizationCode","getPostData","params","getToken","urls","omit","getLink","user","sessionToken","redirectUrl","checkAccountSetupComplete","webstorage","storageName","storageString","token_type_hint","creds","btoa","decodedToken","header","base64UrlToString","validationOptions","sdkCrypto","valid","at_hash","addPostMessageListener","responseHandler","timeoutId","msgReceivedOrTimeout","exchangeCodeForToken","oauthParams","PKCE","getTokenParams","validateResponse","handleOAuthResponse","tokenParams","isArray","code","tokenDict","expiresIn","expires_in","tokenType","token_type","access_token","id_token","Number","idTokenObj","tokens","getDefaultTokenParams","convertTokenParamsToOAuthParams","codeChallenge","codeChallengeMethod","idp","idpScope","loginHint","maxAge","prompt","mayBeArray","scope","buildAuthorizeParams","oauthQueryParams","prepareTokenParams","sessionTokenOverrides","idpOverrides","requestUrl","endpoint","flowType","iframePromise","iframeEl","oauthPromise","windowOptions","windowEl","popupPromise","closePoller","setInterval","closed","clearInterval","errorMessage","methods","clonedParams","addOAuthParamsToStorage","tokenParamsStr","isToken","removeHash","nativeHistory","nativeDoc","nativeLoc","replaceState","pathname","removeSearch","getOAuthParamsStrFromStorage","oauthParamsStr","defaultResponseMode","paramStr","accessTokenObject","idTokenObject","userInfo","sub","authenticateHeader","isFunction","getResponseHeader","errorMatches","match","errorDescriptionMatches","errorDescription","AuthTransaction","flattenEmbedded","_links","cancel","link2fn","link","ref","lk","hints","allow","isPolling","addStateToken","factorType","provider","autoPush","rememberDevice","profile","updatePhone","links2fns","fns","linkName","poll","getPollFn","objArr","o","ol","embedded","_embedded","TransactionState","transactionStep","delay","transactionCallBack","isNumber","pollLink","pollFn","getStateToken","retryCount","recursivePoll","pollRes","factorResult","delayFn","delayLength","pow","builtArgs","b64","base64ToBase64Url","base64UrlToBase64","utf8","atob","escape","i","charCodeAt","ctx","additionalArgs","concat","isoToUTCString","parts","isoTime","UTC","isoDate","toUTCString","randomCharset","random","c","cl","extend","obj1","objArray","prop","cleaned","newobj","props","p","collection","searchParams","item","found","altName","getNativeConsole","getConsole","nativeConsole","log","deprecate","deprecateWrap","trimmed","ms"],"mappings":"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CA;AACA;AACA,GAAG;AACH;AACA;;AAEA,2B;;;;;;;;;;;ACjBA;AACA;AACA;;AAEA,mC;;;;;;;;;;;ACJA;AACA;AACA;AACA;;AAEA;AACA,2EAA2E;AAC3E;AACA,GAAG;AACH;AACA;AACA;;AAEA,2C;;;;;;;;;;;ACbA,cAAc,mBAAO,CAAC,0EAAmB;;AAEzC,4BAA4B,mBAAO,CAAC,+FAAyB;;AAE7D;AACA;AACA;AACA;;AAEA;AACA;;AAEA,4C;;;;;;;;;;;ACZA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA,iC;;;;;;;;;;;ACTA;AACA;;AAEA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;;AAEA;AACA;;AAEA,yB;;;;;;;;;;;AChBA,qBAAqB,mBAAO,CAAC,iFAAkB;;AAE/C,qBAAqB,mBAAO,CAAC,iFAAkB;;AAE/C,uBAAuB,mBAAO,CAAC,qFAAoB;;AAEnD,gBAAgB,mBAAO,CAAC,uEAAa;;AAErC;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;;AAEA;AACA;;AAEA,kC;;;;;;;;;;;AC1CA,iBAAiB,mBAAO,CAAC,0EAAqB;;;;;;;;;;;;ACA9C;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,OAAO;AACP;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,gBAAgB;AAChB;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA,OAAO;AACP,KAAK;AACL;AACA;AACA,OAAO;AACP,KAAK;AACL;AACA;AACA,OAAO;AACP;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;;AAEA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;;AAEA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA,mBAAmB,iBAAiB;AACpC;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA,OAAO;AACP;AACA,OAAO;AACP;AACA,OAAO;AACP;AACA,OAAO;AACP;AACA;AACA;AACA,OAAO;AACP;AACA,OAAO;AACP;AACA;;AAEA;AACA;AACA,uDAAuD;AACvD,SAAS;AACT;AACA,SAAS;AACT,8EAA8E;AAC9E;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,SAAS;AACT;AACA,SAAS;AACT;AACA,SAAS;AACT;AACA;AACA;;AAEA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,OAAO;AACP;AACA,OAAO;AACP;AACA,OAAO;AACP;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA,8BAA8B,qBAAqB;AACnD;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;;AAEA;AACA,uCAAuC,0BAA0B;AACjE;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA,+BAA+B,0BAA0B,eAAe;AACxE;;AAEA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA,OAAO;AACP;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA,OAAO;;AAEP;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,KAAK;AACL;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA,CAAC,GAAG;AACJ,CAAC;AACD;AACA;AACA;AACA,qDAAqD,MAAM;AAC3D;AACA;AACA;AACA;;;;;;;;;;;;AChiBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD;AACA,KAAK,IAA0C;AAC/C,EAAE,oCAAO,OAAO;AAAA;AAAA;AAAA;AAAA,oGAAC;AACjB;AACA;AACA,KAAK,IAA2B;AAChC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD;AACA;AACA;AACA,QAAQ,sBAAsB;AAC9B;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA,cAAc;AACd;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA,KAAK;AACL;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA,gCAAgC;AAChC;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA,2DAA2D;AAC3D,6BAA6B,EAAE;AAC/B;;AAEA,SAAS,oBAAoB;AAC7B;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,OAAO;AACP;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,KAAK;AACL;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAI;AACJ;AACA;;AAEA;AACA;AACA;AACA,IAAI;AACJ;;AAEA;;AAEA;AACA;;AAEA,2BAA2B;AAC3B,CAAC;;;;;;;;;;;;ACpKD;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA,gBAAgB;AAChB;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,cAAc;AACd,KAAK;AACL,cAAc;AACd;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,yDAAyD;AACzD;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,YAAY;AACZ;;AAEA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW;AACX;AACA,WAAW;AACX;;AAEA;AACA;AACA,wCAAwC,WAAW;AACnD;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA,SAAS;AACT;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA,SAAS;AACT;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA,2BAA2B;AAC3B;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,SAAS;AACT;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA,SAAS;AACT;AACA;AACA;AACA;;AAEA;;AAEA,SAAS;AACT;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,oCAAoC,cAAc;AAClD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,KAAK;AACL;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA,iCAAiC,kBAAkB;AACnD;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA,iBAAiB;;AAEjB;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,wBAAwB,iBAAiB;AACzC;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA,YAAY;AACZ;AACA;;AAEA;AACA,YAAY;AACZ;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA,KAAK;;AAEL;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA,8CAA8C,QAAQ;AACtD;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA,aAAa;AACb;AACA;;AAEA,WAAW;AACX;AACA;AACA;;AAEA,WAAW;AACX;AACA;AACA;;AAEA,WAAW;AACX;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA,8CAA8C,QAAQ;AACtD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA,KAAK;;AAEL;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA,OAAO;AACP;AACA;;AAEA;AACA,KAAK;;AAEL;AACA,8CAA8C,QAAQ;AACtD;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA,8CAA8C,QAAQ;AACtD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA,CAAC;AACD;AACA;AACA;AACA;AACA,EAAE,KAA0B,oBAAoB,SAAE;AAClD;;AAEA;AACA;AACA,CAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;ACxtBA;AACA;AACA;AACA;;AAEA;AACA;AACA,kCAAkC;;AAElC;AACA;AACA;AACA,KAAK;;AAEL;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,GAAG;;AAEH;AACA;AACA,yCAAyC;AACzC;AACA;;AAEA,WAAW,SAAS;AACpB;AACA;;AAEA;AACA,GAAG;;AAEH;AACA,kCAAkC;AAClC;AACA;;AAEA;AACA,wCAAwC,SAAS;AACjD;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA","file":"okta-auth-js.umd.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"OktaAuth\"] = factory();\n\telse\n\t\troot[\"OktaAuth\"] = factory();\n})(window, function() {\nreturn "," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = \"./lib/browser/index.ts\");\n","/*!\n * Copyright (c) 2015-present, Okta, Inc. and/or its affiliates. All rights reserved.\n * The Okta software accompanied by this notice is provided pursuant to the Apache License, Version 2.0 (the \"License.\")\n *\n * You may obtain a copy of the License at http://www.apache.org/licenses/LICENSE-2.0.\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS, WITHOUT\n * WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n *\n * See the License for the specific language governing permissions and limitations under the License.\n */\nimport { assertValidConfig } from './builderUtil';\nimport { removeTrailingSlash } from './util';\nimport { transactionStatus, resumeTransaction, transactionExists, introspect, postToTransaction } from './tx';\nexport default class OktaAuthBase {\n    constructor(args) {\n        assertValidConfig(args);\n        this.options = {\n            issuer: removeTrailingSlash(args.issuer),\n            httpRequestClient: args.httpRequestClient,\n            transformErrorXHR: args.transformErrorXHR,\n            storageUtil: args.storageUtil,\n            headers: args.headers\n        };\n        this.tx = {\n            status: transactionStatus.bind(null, this),\n            resume: resumeTransaction.bind(null, this),\n            exists: Object.assign(transactionExists.bind(null, this), {\n                _get: (name) => {\n                    const storage = this.options.storageUtil.storage;\n                    return storage.get(name);\n                }\n            }),\n            introspect: introspect.bind(null, this)\n        };\n    }\n    // { username, password, (relayState), (context) }\n    signIn(opts) {\n        return postToTransaction(this, '/api/v1/authn', opts);\n    }\n    getIssuerOrigin() {\n        // Infer the URL from the issuer URL, omitting the /oauth2/{authServerId}\n        return this.options.issuer.split('/oauth2/')[0];\n    }\n    // { username, (relayState) }\n    forgotPassword(opts) {\n        return postToTransaction(this, '/api/v1/authn/recovery/password', opts);\n    }\n    // { username, (relayState) }\n    unlockAccount(opts) {\n        return postToTransaction(this, '/api/v1/authn/recovery/unlock', opts);\n    }\n    // { recoveryToken }\n    verifyRecoveryToken(opts) {\n        return postToTransaction(this, '/api/v1/authn/recovery/token', opts);\n    }\n}\n","/*!\n * Copyright (c) 2015-present, Okta, Inc. and/or its affiliates. All rights reserved.\n * The Okta software accompanied by this notice is provided pursuant to the Apache License, Version 2.0 (the \"License.\")\n *\n * You may obtain a copy of the License at http://www.apache.org/licenses/LICENSE-2.0.\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS, WITHOUT\n * WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n *\n * See the License for the specific language governing permissions and limitations under the License.\n */\n// Implements a queue for synchronous or asynchronous methods\n// Methods will be wrapped in a promise and execute sequentially\n// This can be used to prevent concurrent calls to a single method or a set of methods\nimport { isPromise } from './util';\nclass PromiseQueue {\n    constructor() {\n        this.queue = [];\n        this.running = false;\n    }\n    // Returns a promise\n    // If the method is synchronous, it will resolve when the method completes\n    // If the method returns a promise, it will resolve (or reject) with the value from the method's promise\n    push( /* method, thisObject, args... */) {\n        var args = Array.prototype.slice.call(arguments);\n        var method = args[0];\n        var thisObject = args[1];\n        args = args.slice(2);\n        return new Promise((resolve, reject) => {\n            this.queue.push({\n                method,\n                thisObject,\n                args,\n                resolve,\n                reject\n            });\n            this.run();\n        });\n    }\n    run() {\n        if (this.running) {\n            return;\n        }\n        if (this.queue.length === 0) {\n            return;\n        }\n        this.running = true;\n        var queueItem = this.queue.shift();\n        var res = queueItem.method.apply(queueItem.thisObject, queueItem.args);\n        if (isPromise(res)) {\n            res.then(queueItem.resolve, queueItem.reject).finally(() => {\n                this.running = false;\n                this.run();\n            });\n        }\n        else {\n            queueItem.resolve(res);\n            this.running = false;\n            this.run();\n        }\n    }\n}\nexport default PromiseQueue;\n","/*!\n * Copyright (c) 2015-present, Okta, Inc. and/or its affiliates. All rights reserved.\n * The Okta software accompanied by this notice is provided pursuant to the Apache License, Version 2.0 (the \"License.\")\n *\n * You may obtain a copy of the License at http://www.apache.org/licenses/LICENSE-2.0.\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS, WITHOUT\n * WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n *\n * See the License for the specific language governing permissions and limitations under the License.\n *\n */\n/* global localStorage, sessionStorage */\n/* eslint complexity:[0,8] max-statements:[0,21] */\nimport { removeNils, warn, isObject } from './util';\nimport AuthSdkError from './errors/AuthSdkError';\nimport storageUtil from './browser/browserStorage';\nimport { TOKEN_STORAGE_NAME } from './constants';\nimport storageBuilder from './storageBuilder';\nimport SdkClock from './clock';\nimport { isIDToken, isAccessToken } from './types';\nvar DEFAULT_OPTIONS = {\n    autoRenew: true,\n    storage: 'localStorage',\n    expireEarlySeconds: 30\n};\nfunction getExpireTime(tokenMgmtRef, token) {\n    var expireTime = token.expiresAt - tokenMgmtRef.options.expireEarlySeconds;\n    return expireTime;\n}\nfunction hasExpired(tokenMgmtRef, token) {\n    var expireTime = getExpireTime(tokenMgmtRef, token);\n    return expireTime <= tokenMgmtRef.clock.now();\n}\nfunction emitExpired(tokenMgmtRef, key, token) {\n    tokenMgmtRef.emitter.emit('expired', key, token);\n}\nfunction emitRemoved(tokenMgmtRef, key) {\n    tokenMgmtRef.emitter.emit('removed', key);\n}\nfunction emitError(tokenMgmtRef, error) {\n    tokenMgmtRef.emitter.emit('error', error);\n}\nfunction clearExpireEventTimeout(tokenMgmtRef, key) {\n    clearTimeout(tokenMgmtRef.expireTimeouts[key]);\n    delete tokenMgmtRef.expireTimeouts[key];\n    // Remove the renew promise (if it exists)\n    delete tokenMgmtRef.renewPromise[key];\n}\nfunction clearExpireEventTimeoutAll(tokenMgmtRef) {\n    var expireTimeouts = tokenMgmtRef.expireTimeouts;\n    for (var key in expireTimeouts) {\n        if (!Object.prototype.hasOwnProperty.call(expireTimeouts, key)) {\n            continue;\n        }\n        clearExpireEventTimeout(tokenMgmtRef, key);\n    }\n}\nfunction setExpireEventTimeout(sdk, tokenMgmtRef, key, token) {\n    var expireTime = getExpireTime(tokenMgmtRef, token);\n    var expireEventWait = Math.max(expireTime - tokenMgmtRef.clock.now(), 0) * 1000;\n    // Clear any existing timeout\n    clearExpireEventTimeout(tokenMgmtRef, key);\n    var expireEventTimeout = setTimeout(function () {\n        emitExpired(tokenMgmtRef, key, token);\n    }, expireEventWait);\n    // Add a new timeout\n    tokenMgmtRef.expireTimeouts[key] = expireEventTimeout;\n}\nfunction setExpireEventTimeoutAll(sdk, tokenMgmtRef, storage) {\n    try {\n        var tokenStorage = storage.getStorage();\n    }\n    catch (e) {\n        // Any errors thrown on instantiation will not be caught,\n        // because there are no listeners yet\n        emitError(tokenMgmtRef, e);\n        return;\n    }\n    for (var key in tokenStorage) {\n        if (!Object.prototype.hasOwnProperty.call(tokenStorage, key)) {\n            continue;\n        }\n        var token = tokenStorage[key];\n        setExpireEventTimeout(sdk, tokenMgmtRef, key, token);\n    }\n}\nfunction add(sdk, tokenMgmtRef, storage, key, token) {\n    var tokenStorage = storage.getStorage();\n    if (!isObject(token) ||\n        !token.scopes ||\n        (!token.expiresAt && token.expiresAt !== 0) ||\n        (!isIDToken(token) && !isAccessToken(token))) {\n        throw new AuthSdkError('Token must be an Object with scopes, expiresAt, and an idToken or accessToken properties');\n    }\n    tokenStorage[key] = token;\n    storage.setStorage(tokenStorage);\n    setExpireEventTimeout(sdk, tokenMgmtRef, key, token);\n}\nfunction get(storage, key) {\n    var tokenStorage = storage.getStorage();\n    return tokenStorage[key];\n}\nfunction getAsync(sdk, tokenMgmtRef, storage, key) {\n    return new Promise(function (resolve) {\n        var token = get(storage, key);\n        return resolve(token);\n    });\n}\nfunction remove(tokenMgmtRef, storage, key) {\n    // Clear any listener for this token\n    clearExpireEventTimeout(tokenMgmtRef, key);\n    // Remove it from storage\n    var tokenStorage = storage.getStorage();\n    delete tokenStorage[key];\n    storage.setStorage(tokenStorage);\n    emitRemoved(tokenMgmtRef, key);\n}\nfunction renew(sdk, tokenMgmtRef, storage, key) {\n    // Multiple callers may receive the same promise. They will all resolve or reject from the same request.\n    var existingPromise = tokenMgmtRef.renewPromise[key];\n    if (existingPromise) {\n        return existingPromise;\n    }\n    try {\n        var token = get(storage, key);\n        if (!token) {\n            throw new AuthSdkError('The tokenManager has no token for the key: ' + key);\n        }\n    }\n    catch (e) {\n        return Promise.reject(e);\n    }\n    // Remove existing autoRenew timeout for this key\n    clearExpireEventTimeout(tokenMgmtRef, key);\n    // Store the renew promise state, to avoid renewing again\n    tokenMgmtRef.renewPromise[key] = sdk.token.renew(token)\n        .then(function (freshToken) {\n        var oldToken = get(storage, key);\n        if (!oldToken) {\n            // It is possible to enter a state where the tokens have been cleared\n            // after a renewal request was triggered. To ensure we do not store a\n            // renewed token, we verify the promise key doesn't exist and return.\n            return;\n        }\n        add(sdk, tokenMgmtRef, storage, key, freshToken);\n        tokenMgmtRef.emitter.emit('renewed', key, freshToken, oldToken);\n        return freshToken;\n    })\n        .catch(function (err) {\n        if (err.name === 'OAuthError' || err.name === 'AuthSdkError') {\n            remove(tokenMgmtRef, storage, key);\n            err.tokenKey = key;\n            err.accessToken = !!token.accessToken;\n            emitError(tokenMgmtRef, err);\n        }\n        throw err;\n    })\n        .finally(function () {\n        // Remove existing promise key\n        delete tokenMgmtRef.renewPromise[key];\n    });\n    return tokenMgmtRef.renewPromise[key];\n}\nfunction clear(tokenMgmtRef, storage) {\n    clearExpireEventTimeoutAll(tokenMgmtRef);\n    storage.clearStorage();\n}\nfunction shouldThrottleRenew(renewTimeQueue) {\n    let res = false;\n    renewTimeQueue.push(Date.now());\n    if (renewTimeQueue.length >= 10) {\n        // get and remove first item from queue\n        const firstTime = renewTimeQueue.shift();\n        const lastTime = renewTimeQueue[renewTimeQueue.length - 1];\n        res = lastTime - firstTime < 30 * 1000;\n    }\n    return res;\n}\nexport class TokenManager {\n    constructor(sdk, options) {\n        options = Object.assign({}, DEFAULT_OPTIONS, removeNils(options));\n        if (options.storage === 'localStorage' && !storageUtil.browserHasLocalStorage()) {\n            warn('This browser doesn\\'t support localStorage. Switching to sessionStorage.');\n            options.storage = 'sessionStorage';\n        }\n        if (options.storage === 'sessionStorage' && !storageUtil.browserHasSessionStorage()) {\n            warn('This browser doesn\\'t support sessionStorage. Switching to cookie-based storage.');\n            options.storage = 'cookie';\n        }\n        var storageProvider;\n        if (typeof options.storage === 'object') {\n            // A custom storage provider must implement getItem(key) and setItem(key, val)\n            storageProvider = options.storage;\n        }\n        else {\n            switch (options.storage) {\n                case 'localStorage':\n                    storageProvider = localStorage;\n                    break;\n                case 'sessionStorage':\n                    storageProvider = sessionStorage;\n                    break;\n                case 'cookie':\n                    // Implement customized cookie storage to make sure each token is stored separatedly in cookie\n                    storageProvider = (function (options) {\n                        var storage = storageUtil.getCookieStorage(options);\n                        return {\n                            getItem: function (key) {\n                                var data = storage.getItem();\n                                var value = {};\n                                Object.keys(data).forEach(k => {\n                                    if (k.indexOf(key) === 0) {\n                                        value[k.replace(`${key}_`, '')] = JSON.parse(data[k]);\n                                    }\n                                });\n                                return JSON.stringify(value);\n                            },\n                            setItem: function (key, value) {\n                                var existingValues = JSON.parse(this.getItem(key));\n                                value = JSON.parse(value);\n                                // Set key-value pairs from input to cookies\n                                Object.keys(value).forEach(k => {\n                                    var storageKey = key + '_' + k;\n                                    var valueToStore = JSON.stringify(value[k]);\n                                    storage.setItem(storageKey, valueToStore);\n                                    delete existingValues[k];\n                                });\n                                // Delete unmatched keys from existing cookies\n                                Object.keys(existingValues).forEach(k => {\n                                    storageUtil.storage.delete(key + '_' + k);\n                                });\n                            }\n                        };\n                    }(sdk.options.cookies));\n                    break;\n                case 'memory':\n                    storageProvider = storageUtil.getInMemoryStorage();\n                    break;\n                default:\n                    throw new AuthSdkError('Unrecognized storage option');\n            }\n        }\n        var storageKey = options.storageKey || TOKEN_STORAGE_NAME;\n        var storage = storageBuilder(storageProvider, storageKey);\n        var clock = SdkClock.create( /* sdk, options */);\n        var tokenMgmtRef = {\n            clock: clock,\n            options: options,\n            emitter: sdk.emitter,\n            expireTimeouts: {},\n            renewPromise: {}\n        };\n        this.add = add.bind(this, sdk, tokenMgmtRef, storage);\n        this.get = getAsync.bind(this, sdk, tokenMgmtRef, storage);\n        this.remove = remove.bind(this, tokenMgmtRef, storage);\n        this.clear = clear.bind(this, tokenMgmtRef, storage);\n        this.renew = renew.bind(this, sdk, tokenMgmtRef, storage);\n        this.on = tokenMgmtRef.emitter.on.bind(tokenMgmtRef.emitter);\n        this.off = tokenMgmtRef.emitter.off.bind(tokenMgmtRef.emitter);\n        this.hasExpired = hasExpired.bind(this, tokenMgmtRef);\n        const renewTimeQueue = [];\n        const onTokenExpiredHandler = (key) => {\n            if (options.autoRenew) {\n                if (shouldThrottleRenew(renewTimeQueue)) {\n                    const error = new AuthSdkError('Too many token renew requests');\n                    emitError(tokenMgmtRef, error);\n                }\n                else {\n                    this.renew(key).catch(() => { }); // Renew errors will emit an \"error\" event \n                }\n            }\n            else {\n                this.remove(key);\n            }\n        };\n        this.on('expired', onTokenExpiredHandler);\n        setExpireEventTimeoutAll(sdk, tokenMgmtRef, storage);\n    }\n}\n","/*!\n * Copyright (c) 2015-present, Okta, Inc. and/or its affiliates. All rights reserved.\n * The Okta software accompanied by this notice is provided pursuant to the Apache License, Version 2.0 (the \"License.\")\n *\n * You may obtain a copy of the License at http://www.apache.org/licenses/LICENSE-2.0.\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS, WITHOUT\n * WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n *\n * See the License for the specific language governing permissions and limitations under the License.\n */\n/* eslint-disable complexity */\n/* eslint-disable max-statements */\n/* SDK_VERSION is defined in webpack config */\n/* global SDK_VERSION */\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nimport OktaAuthBase from '../OktaAuthBase';\nimport * as features from './features';\nimport fetchRequest from '../fetch/fetchRequest';\nimport browserStorage from './browserStorage';\nimport { removeTrailingSlash, toQueryString, clone } from '../util';\nimport { getUserAgent } from '../builderUtil';\nimport { DEFAULT_MAX_CLOCK_SKEW, ACCESS_TOKEN_STORAGE_KEY, ID_TOKEN_STORAGE_KEY } from '../constants';\nimport { closeSession, sessionExists, getSession, refreshSession, setCookieAndRedirect } from '../session';\nimport { getWithoutPrompt, getWithPopup, getWithRedirect, parseFromUrl, decodeToken, revokeToken, renewToken, getUserInfo, verifyToken } from '../token';\nimport { TokenManager } from '../TokenManager';\nimport { getOAuthUrls, isLoginRedirect } from '../oauthUtil';\nimport http from '../http';\nimport PromiseQueue from '../PromiseQueue';\nimport fingerprint from './fingerprint';\nimport { postToTransaction } from '../tx';\nconst Emitter = require('tiny-emitter');\nclass OktaAuthBrowser extends OktaAuthBase {\n    constructor(args) {\n        args = Object.assign({\n            httpRequestClient: fetchRequest,\n            storageUtil: browserStorage\n        }, args);\n        super(args);\n        var cookieSettings = Object.assign({\n            secure: true\n        }, args.cookies);\n        var isLocalhost = (this.features.isLocalhost() && !this.features.isHTTPS());\n        if (isLocalhost) {\n            cookieSettings.secure = false; // Force secure=false if running on http://localhost\n        }\n        if (typeof cookieSettings.sameSite === 'undefined') {\n            // Chrome >= 80 will block cookies with SameSite=None unless they are also Secure\n            cookieSettings.sameSite = cookieSettings.secure ? 'none' : 'lax';\n        }\n        if (cookieSettings.secure && !this.features.isHTTPS()) {\n            // eslint-disable-next-line no-console\n            console.warn('The current page is not being served with the HTTPS protocol.\\n' +\n                'For security reasons, we strongly recommend using HTTPS.\\n' +\n                'If you cannot use HTTPS, set \"cookies.secure\" option to false.');\n            cookieSettings.secure = false;\n        }\n        this.options = Object.assign(this.options, {\n            clientId: args.clientId,\n            authorizeUrl: removeTrailingSlash(args.authorizeUrl),\n            userinfoUrl: removeTrailingSlash(args.userinfoUrl),\n            tokenUrl: removeTrailingSlash(args.tokenUrl),\n            revokeUrl: removeTrailingSlash(args.revokeUrl),\n            logoutUrl: removeTrailingSlash(args.logoutUrl),\n            pkce: args.pkce === false ? false : true,\n            redirectUri: args.redirectUri,\n            postLogoutRedirectUri: args.postLogoutRedirectUri,\n            responseMode: args.responseMode,\n            cookies: cookieSettings\n        });\n        this.userAgent = getUserAgent(args, `okta-auth-js/${SDK_VERSION}`);\n        // Digital clocks will drift over time, so the server\n        // can misalign with the time reported by the browser.\n        // The maxClockSkew allows relaxing the time-based\n        // validation of tokens (in seconds, not milliseconds).\n        // It currently defaults to 300, because 5 min is the\n        // default maximum tolerance allowed by Kerberos.\n        // (https://technet.microsoft.com/en-us/library/cc976357.aspx)\n        if (!args.maxClockSkew && args.maxClockSkew !== 0) {\n            this.options.maxClockSkew = DEFAULT_MAX_CLOCK_SKEW;\n        }\n        else {\n            this.options.maxClockSkew = args.maxClockSkew;\n        }\n        // Give the developer the ability to disable token signature\n        // validation.\n        this.options.ignoreSignature = !!args.ignoreSignature;\n        this.session = {\n            close: closeSession.bind(null, this),\n            exists: sessionExists.bind(null, this),\n            get: getSession.bind(null, this),\n            refresh: refreshSession.bind(null, this),\n            setCookieAndRedirect: setCookieAndRedirect.bind(null, this)\n        };\n        this._tokenQueue = new PromiseQueue();\n        this.token = {\n            getWithoutPrompt: getWithoutPrompt.bind(null, this),\n            getWithPopup: getWithPopup.bind(null, this),\n            getWithRedirect: getWithRedirect.bind(null, this),\n            parseFromUrl: parseFromUrl.bind(null, this),\n            decode: decodeToken,\n            revoke: revokeToken.bind(null, this),\n            renew: renewToken.bind(null, this),\n            getUserInfo: getUserInfo.bind(null, this),\n            verify: verifyToken.bind(null, this),\n            isLoginRedirect: isLoginRedirect.bind(null, this)\n        };\n        // Wrap all async token API methods using MethodQueue to avoid issues with concurrency\n        const syncMethods = ['decode', 'isLoginRedirect'];\n        Object.keys(this.token).forEach(key => {\n            if (syncMethods.indexOf(key) >= 0) { // sync methods should not be wrapped\n                return;\n            }\n            var method = this.token[key];\n            this.token[key] = PromiseQueue.prototype.push.bind(this._tokenQueue, method, null);\n        });\n        Object.assign(this.token.getWithRedirect, {\n            // This is exposed so we can set window.location in our tests\n            _setLocation: function (url) {\n                window.location = url;\n            }\n        });\n        Object.assign(this.token.parseFromUrl, {\n            // This is exposed so we can mock getting window.history in our tests\n            _getHistory: function () {\n                return window.history;\n            },\n            // This is exposed so we can mock getting window.location in our tests\n            _getLocation: function () {\n                return window.location;\n            },\n            // This is exposed so we can mock getting window.document in our tests\n            _getDocument: function () {\n                return window.document;\n            }\n        });\n        // Fingerprint API\n        this.fingerprint = fingerprint.bind(null, this);\n        this.emitter = new Emitter();\n        this.tokenManager = new TokenManager(this, args.tokenManager);\n    }\n    signIn(opts) {\n        opts = clone(opts || {});\n        const _postToTransaction = (options) => {\n            delete opts.sendFingerprint;\n            return postToTransaction(this, '/api/v1/authn', opts, options);\n        };\n        if (!opts.sendFingerprint) {\n            return _postToTransaction();\n        }\n        return this.fingerprint()\n            .then(function (fingerprint) {\n            return _postToTransaction({\n                headers: {\n                    'X-Device-Fingerprint': fingerprint\n                }\n            });\n        });\n    }\n    // Ends the current Okta SSO session without redirecting to Okta.\n    closeSession() {\n        // Clear all local tokens\n        this.tokenManager.clear();\n        return this.session.close() // DELETE /api/v1/sessions/me\n            .catch(function (e) {\n            if (e.name === 'AuthApiError' && e.errorCode === 'E0000007') {\n                // Session does not exist or has already been closed\n                return;\n            }\n            throw e;\n        });\n    }\n    // Revokes the access token for the application session\n    revokeAccessToken(accessToken) {\n        return __awaiter(this, void 0, void 0, function* () {\n            if (!accessToken) {\n                accessToken = (yield this.tokenManager.get(ACCESS_TOKEN_STORAGE_KEY));\n                this.tokenManager.remove(ACCESS_TOKEN_STORAGE_KEY);\n            }\n            // Access token may have been removed. In this case, we will silently succeed.\n            if (!accessToken) {\n                return Promise.resolve();\n            }\n            return this.token.revoke(accessToken);\n        });\n    }\n    // Revokes accessToken, clears all local tokens, then redirects to Okta to end the SSO session.\n    signOut(options) {\n        return __awaiter(this, void 0, void 0, function* () {\n            options = Object.assign({}, options);\n            // postLogoutRedirectUri must be whitelisted in Okta Admin UI\n            var defaultUri = window.location.origin;\n            var currentUri = window.location.href;\n            var postLogoutRedirectUri = options.postLogoutRedirectUri\n                || this.options.postLogoutRedirectUri\n                || defaultUri;\n            var accessToken = options.accessToken;\n            var revokeAccessToken = options.revokeAccessToken !== false;\n            var idToken = options.idToken;\n            var logoutUrl = getOAuthUrls(this).logoutUrl;\n            if (typeof idToken === 'undefined') {\n                idToken = yield this.tokenManager.get(ID_TOKEN_STORAGE_KEY);\n            }\n            if (revokeAccessToken && typeof accessToken === 'undefined') {\n                accessToken = yield this.tokenManager.get(ACCESS_TOKEN_STORAGE_KEY);\n            }\n            // Clear all local tokens\n            this.tokenManager.clear();\n            if (revokeAccessToken && accessToken) {\n                yield this.revokeAccessToken(accessToken);\n            }\n            // No idToken? This can happen if the storage was cleared.\n            // Fallback to XHR signOut, then simulate a redirect to the post logout uri\n            if (!idToken) {\n                return this.closeSession() // can throw if the user cannot be signed out\n                    .then(function () {\n                    if (postLogoutRedirectUri === currentUri) {\n                        window.location.reload(); // force a hard reload if URI is not changing\n                    }\n                    else {\n                        window.location.assign(postLogoutRedirectUri);\n                    }\n                });\n            }\n            // logout redirect using the idToken.\n            var state = options.state;\n            var idTokenHint = idToken.idToken; // a string\n            var logoutUri = logoutUrl + '?id_token_hint=' + encodeURIComponent(idTokenHint) +\n                '&post_logout_redirect_uri=' + encodeURIComponent(postLogoutRedirectUri);\n            // State allows option parameters to be passed to logout redirect uri\n            if (state) {\n                logoutUri += '&state=' + encodeURIComponent(state);\n            }\n            window.location.assign(logoutUri);\n        });\n    }\n    webfinger(opts) {\n        var url = '/.well-known/webfinger' + toQueryString(opts);\n        var options = {\n            headers: {\n                'Accept': 'application/jrd+json'\n            }\n        };\n        return http.get(this, url, options);\n    }\n}\n// Hoist feature detection functions to static type\nOktaAuthBrowser.features = OktaAuthBrowser.prototype.features = features;\nexport default OktaAuthBrowser;\n","/*!\n * Copyright (c) 2015-present, Okta, Inc. and/or its affiliates. All rights reserved.\n * The Okta software accompanied by this notice is provided pursuant to the Apache License, Version 2.0 (the \"License.\")\n *\n * You may obtain a copy of the License at http://www.apache.org/licenses/LICENSE-2.0.\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS, WITHOUT\n * WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n *\n * See the License for the specific language governing permissions and limitations under the License.\n *\n */\nimport storageBuilder from '../storageBuilder';\nimport { PKCE_STORAGE_NAME, CACHE_STORAGE_NAME } from '../constants';\nimport AuthSdkError from '../errors/AuthSdkError';\nconst Cookies = require('js-cookie');\n// Building this as an object allows us to mock the functions in our tests\nvar storageUtil = {\n    // IE11 bug that Microsoft doesn't plan to fix\n    // https://connect.microsoft.com/IE/Feedback/Details/1496040\n    browserHasLocalStorage: function () {\n        try {\n            var storage = storageUtil.getLocalStorage();\n            return storageUtil.testStorage(storage);\n        }\n        catch (e) {\n            return false;\n        }\n    },\n    browserHasSessionStorage: function () {\n        try {\n            var storage = storageUtil.getSessionStorage();\n            return storageUtil.testStorage(storage);\n        }\n        catch (e) {\n            return false;\n        }\n    },\n    getPKCEStorage: function (options) {\n        options = options || {};\n        if (!options.preferLocalStorage && storageUtil.browserHasSessionStorage()) {\n            return storageBuilder(storageUtil.getSessionStorage(), PKCE_STORAGE_NAME);\n        }\n        else if (storageUtil.browserHasLocalStorage()) {\n            return storageBuilder(storageUtil.getLocalStorage(), PKCE_STORAGE_NAME);\n        }\n        else {\n            return storageBuilder(storageUtil.getCookieStorage(options), PKCE_STORAGE_NAME);\n        }\n    },\n    getHttpCache: function (options) {\n        if (storageUtil.browserHasLocalStorage()) {\n            return storageBuilder(storageUtil.getLocalStorage(), CACHE_STORAGE_NAME);\n        }\n        else if (storageUtil.browserHasSessionStorage()) {\n            return storageBuilder(storageUtil.getSessionStorage(), CACHE_STORAGE_NAME);\n        }\n        else {\n            return storageBuilder(storageUtil.getCookieStorage(options), CACHE_STORAGE_NAME);\n        }\n    },\n    getLocalStorage: function () {\n        return localStorage;\n    },\n    getSessionStorage: function () {\n        return sessionStorage;\n    },\n    // Provides webStorage-like interface for cookies\n    getCookieStorage: function (options) {\n        const secure = options.secure;\n        const sameSite = options.sameSite;\n        if (typeof secure === 'undefined' || typeof sameSite === 'undefined') {\n            throw new AuthSdkError('getCookieStorage: \"secure\" and \"sameSite\" options must be provided');\n        }\n        return {\n            getItem: storageUtil.storage.get,\n            setItem: function (key, value) {\n                // Cookie shouldn't expire\n                storageUtil.storage.set(key, value, '2200-01-01T00:00:00.000Z', {\n                    secure: secure,\n                    sameSite: sameSite\n                });\n            }\n        };\n    },\n    // Provides an in-memory solution\n    getInMemoryStorage: function () {\n        var store = {};\n        return {\n            getItem: function (key) {\n                return store[key];\n            },\n            setItem: function (key, value) {\n                store[key] = value;\n            }\n        };\n    },\n    testStorage: function (storage) {\n        var key = 'okta-test-storage';\n        try {\n            storage.setItem(key, key);\n            storage.removeItem(key);\n            return true;\n        }\n        catch (e) {\n            return false;\n        }\n    },\n    storage: {\n        set: function (name, value, expiresAt, options) {\n            const secure = options.secure;\n            const sameSite = options.sameSite;\n            if (typeof secure === 'undefined' || typeof sameSite === 'undefined') {\n                throw new AuthSdkError('storage.set: \"secure\" and \"sameSite\" options must be provided');\n            }\n            var cookieOptions = {\n                path: options.path || '/',\n                secure,\n                sameSite\n            };\n            // eslint-disable-next-line no-extra-boolean-cast\n            if (!!(Date.parse(expiresAt))) {\n                // Expires value can be converted to a Date object.\n                //\n                // If the 'expiresAt' value is not provided, or the value cannot be\n                // parsed as a Date object, the cookie will set as a session cookie.\n                cookieOptions.expires = new Date(expiresAt);\n            }\n            Cookies.set(name, value, cookieOptions);\n            return storageUtil.storage.get(name);\n        },\n        get: function (name) {\n            return Cookies.get(name);\n        },\n        delete: function (name) {\n            return Cookies.remove(name, { path: '/' });\n        }\n    }\n};\nexport default storageUtil;\n","/*!\n * Copyright (c) 2015-present, Okta, Inc. and/or its affiliates. All rights reserved.\n * The Okta software accompanied by this notice is provided pursuant to the Apache License, Version 2.0 (the \"License.\")\n *\n * You may obtain a copy of the License at http://www.apache.org/licenses/LICENSE-2.0.\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS, WITHOUT\n * WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n *\n * See the License for the specific language governing permissions and limitations under the License.\n */\nconst isWindowsPhone = /windows phone|iemobile|wpdesktop/i;\nexport function getUserAgent() {\n    return navigator.userAgent;\n}\nexport function isFingerprintSupported() {\n    const agent = getUserAgent();\n    return agent && !isWindowsPhone.test(agent);\n}\nexport function isPopupPostMessageSupported() {\n    var isIE8or9 = document.documentMode && document.documentMode < 10;\n    if (window.postMessage && !isIE8or9) {\n        return true;\n    }\n    return false;\n}\nexport function isTokenVerifySupported() {\n    return typeof crypto !== 'undefined' && crypto.subtle && typeof Uint8Array !== 'undefined';\n}\nexport function hasTextEncoder() {\n    return typeof TextEncoder !== 'undefined';\n}\nexport function isPKCESupported() {\n    return isTokenVerifySupported() && hasTextEncoder();\n}\nexport function isHTTPS() {\n    return window.location.protocol === 'https:';\n}\nexport function isLocalhost() {\n    return window.location.hostname === 'localhost';\n}\n","import { AuthSdkError } from '../errors';\nimport { isFingerprintSupported } from './features';\nimport { addListener, removeListener } from '../oauthUtil';\nexport default function fingerprint(sdk, options) {\n    options = options || {};\n    if (!isFingerprintSupported()) {\n        return Promise.reject(new AuthSdkError('Fingerprinting is not supported on this device'));\n    }\n    var timeout;\n    var iframe;\n    var listener;\n    var promise = new Promise(function (resolve, reject) {\n        iframe = document.createElement('iframe');\n        iframe.style.display = 'none';\n        // eslint-disable-next-line complexity\n        listener = function listener(e) {\n            if (!e || !e.data || e.origin !== sdk.getIssuerOrigin()) {\n                return;\n            }\n            try {\n                var msg = JSON.parse(e.data);\n            }\n            catch (err) {\n                // iframe messages should all be parsable\n                // skip not parsable messages come from other sources in same origin (browser extensions)\n                // TODO: add namespace flag in okta-core to distinguish messages that come from other sources\n                return;\n            }\n            if (!msg) {\n                return;\n            }\n            if (msg.type === 'FingerprintAvailable') {\n                return resolve(msg.fingerprint);\n            }\n            if (msg.type === 'FingerprintServiceReady') {\n                e.source.postMessage(JSON.stringify({\n                    type: 'GetFingerprint'\n                }), e.origin);\n            }\n        };\n        addListener(window, 'message', listener);\n        iframe.src = sdk.getIssuerOrigin() + '/auth/services/devicefingerprint';\n        document.body.appendChild(iframe);\n        timeout = setTimeout(function () {\n            reject(new AuthSdkError('Fingerprinting timed out'));\n        }, options.timeout || 15000);\n    });\n    return promise.finally(function () {\n        clearTimeout(timeout);\n        removeListener(window, 'message', listener);\n        if (document.body.contains(iframe)) {\n            iframe.parentElement.removeChild(iframe);\n        }\n    });\n}\n","/*!\n * Copyright (c) 2015-present, Okta, Inc. and/or its affiliates. All rights reserved.\n * The Okta software accompanied by this notice is provided pursuant to the Apache License, Version 2.0 (the \"License.\")\n *\n * You may obtain a copy of the License at http://www.apache.org/licenses/LICENSE-2.0.\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS, WITHOUT\n * WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n *\n * See the License for the specific language governing permissions and limitations under the License.\n *\n */\nexport { default as OktaAuth } from './browser';\nexport * from '../constants';\nexport * from '../types';\nexport * from '../tx';\nexport * from '../errors';\nexport * from '../TokenManager';\n","/*!\n * Copyright (c) 2018-present, Okta, Inc. and/or its affiliates. All rights reserved.\n * The Okta software accompanied by this notice is provided pursuant to the Apache License, Version 2.0 (the \"License.\")\n *\n * You may obtain a copy of the License at http://www.apache.org/licenses/LICENSE-2.0.\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS, WITHOUT\n * WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n *\n * See the License for the specific language governing permissions and limitations under the License.\n */\nimport AuthSdkError from './errors/AuthSdkError';\n// TODO: use @okta/configuration-validation (move module to this monorepo?)\n// eslint-disable-next-line complexity\nfunction assertValidConfig(args) {\n    args = args || {};\n    var issuer = args.issuer;\n    if (!issuer) {\n        throw new AuthSdkError('No issuer passed to constructor. ' +\n            'Required usage: new OktaAuth({issuer: \"https://{yourOktaDomain}.com/oauth2/{authServerId}\"})');\n    }\n    var isUrlRegex = new RegExp('^http?s?://.+');\n    if (!isUrlRegex.test(args.issuer)) {\n        throw new AuthSdkError('Issuer must be a valid URL. ' +\n            'Required usage: new OktaAuth({issuer: \"https://{yourOktaDomain}.com/oauth2/{authServerId}\"})');\n    }\n    if (issuer.indexOf('-admin.') !== -1) {\n        throw new AuthSdkError('Issuer URL passed to constructor contains \"-admin\" in subdomain. ' +\n            'Required usage: new OktaAuth({issuer: \"https://{yourOktaDomain}.com})');\n    }\n    var userAgent = args.userAgent;\n    var userAgentTemplateWithNoPlaceholder = userAgent && userAgent.template && userAgent.template.indexOf('$OKTA_AUTH_JS') === -1;\n    if (userAgentTemplateWithNoPlaceholder) {\n        throw new AuthSdkError('UserAgentTemplate must include \"$OKTA_AUTH_JS\" placeholder. ' +\n            'Required usage: new OktaAuth({userAgentTemplate: \"xxx $OKTA_AUTH_JS xxx\"})');\n    }\n}\nfunction getUserAgent(args, sdkValue) {\n    var userAgent = args.userAgent || {};\n    if (userAgent.value) {\n        return userAgent.value;\n    }\n    if (userAgent.template) {\n        return userAgent.template.replace('$OKTA_AUTH_JS', sdkValue);\n    }\n    return sdkValue;\n}\nexport { assertValidConfig, getUserAgent };\n","/*!\n * Copyright (c) 2015-present, Okta, Inc. and/or its affiliates. All rights reserved.\n * The Okta software accompanied by this notice is provided pursuant to the Apache License, Version 2.0 (the \"License.\")\n *\n * You may obtain a copy of the License at http://www.apache.org/licenses/LICENSE-2.0.\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS, WITHOUT\n * WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n *\n * See the License for the specific language governing permissions and limitations under the License.\n */\nexport default class SdkClock {\n    constructor(localOffset) {\n        // Calculated local clock offset from server time (in milliseconds). Can be positive or negative.\n        this.localOffset = parseInt(localOffset || 0);\n    }\n    // factory method. Create an instance of a clock from current context.\n    static create( /* sdk, options */) {\n        // TODO: calculate localOffset\n        var localOffset = 0;\n        return new SdkClock(localOffset);\n    }\n    // Return the current time (in seconds)\n    now() {\n        var now = (Date.now() + this.localOffset) / 1000;\n        return now;\n    }\n}\n","/*!\n * Copyright (c) 2015-present, Okta, Inc. and/or its affiliates. All rights reserved.\n * The Okta software accompanied by this notice is provided pursuant to the Apache License, Version 2.0 (the \"License.\")\n *\n * You may obtain a copy of the License at http://www.apache.org/licenses/LICENSE-2.0.\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS, WITHOUT\n * WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n *\n * See the License for the specific language governing permissions and limitations under the License.\n */\nexport const STATE_TOKEN_KEY_NAME = 'oktaStateToken';\nexport const DEFAULT_POLLING_DELAY = 500;\nexport const DEFAULT_MAX_CLOCK_SKEW = 300;\nexport const DEFAULT_CACHE_DURATION = 86400;\nexport const REDIRECT_OAUTH_PARAMS_NAME = 'okta-oauth-redirect-params';\nexport const REDIRECT_STATE_COOKIE_NAME = 'okta-oauth-state';\nexport const REDIRECT_NONCE_COOKIE_NAME = 'okta-oauth-nonce';\nexport const TOKEN_STORAGE_NAME = 'okta-token-storage';\nexport const CACHE_STORAGE_NAME = 'okta-cache-storage';\nexport const PKCE_STORAGE_NAME = 'okta-pkce-storage';\nexport const ACCESS_TOKEN_STORAGE_KEY = 'accessToken';\nexport const ID_TOKEN_STORAGE_KEY = 'idToken';\n","/*!\n * Copyright (c) 2015-present, Okta, Inc. and/or its affiliates. All rights reserved.\n * The Okta software accompanied by this notice is provided pursuant to the Apache License, Version 2.0 (the \"License.\")\n *\n * You may obtain a copy of the License at http://www.apache.org/licenses/LICENSE-2.0.\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS, WITHOUT\n * WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n *\n * See the License for the specific language governing permissions and limitations under the License.\n */\n/* global crypto */\nimport { stringToBase64Url, clone, stringToBuffer, base64UrlDecode } from './util';\nfunction getOidcHash(str) {\n    var buffer = new TextEncoder().encode(str);\n    return crypto.subtle.digest('SHA-256', buffer).then(function (arrayBuffer) {\n        var intBuffer = new Uint8Array(arrayBuffer);\n        var firstHalf = intBuffer.slice(0, 16);\n        var hash = String.fromCharCode.apply(null, firstHalf);\n        var b64u = stringToBase64Url(hash); // url-safe base64 variant\n        return b64u;\n    });\n}\nfunction verifyToken(idToken, key) {\n    key = clone(key);\n    var format = 'jwk';\n    var algo = {\n        name: 'RSASSA-PKCS1-v1_5',\n        hash: { name: 'SHA-256' }\n    };\n    var extractable = true;\n    var usages = ['verify'];\n    // https://connect.microsoft.com/IE/feedback/details/2242108/webcryptoapi-importing-jwk-with-use-field-fails\n    // This is a metadata tag that specifies the intent of how the key should be used.\n    // It's not necessary to properly verify the jwt's signature.\n    delete key.use;\n    // @ts-ignore\n    return crypto.subtle.importKey(format, key, algo, extractable, usages)\n        .then(function (cryptoKey) {\n        var jwt = idToken.split('.');\n        var payload = stringToBuffer(jwt[0] + '.' + jwt[1]);\n        var b64Signature = base64UrlDecode(jwt[2]);\n        var signature = stringToBuffer(b64Signature);\n        return crypto.subtle.verify(algo, cryptoKey, signature, payload);\n    });\n}\nexport { getOidcHash, verifyToken };\n","/*!\n * Copyright (c) 2015-present, Okta, Inc. and/or its affiliates. All rights reserved.\n * The Okta software accompanied by this notice is provided pursuant to the Apache License, Version 2.0 (the \"License.\")\n *\n * You may obtain a copy of the License at http://www.apache.org/licenses/LICENSE-2.0.\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS, WITHOUT\n * WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n *\n * See the License for the specific language governing permissions and limitations under the License.\n */\nimport CustomError from './CustomError';\nexport default class AuthApiError extends CustomError {\n    constructor(err, xhr) {\n        const message = err.errorSummary;\n        super(message);\n        this.name = 'AuthApiError';\n        this.errorSummary = err.errorSummary;\n        this.errorCode = err.errorCode;\n        this.errorLink = err.errorLink;\n        this.errorId = err.errorId;\n        this.errorCauses = err.errorCauses;\n        if (xhr) {\n            this.xhr = xhr;\n        }\n    }\n}\n","/*!\n * Copyright (c) 2015-present, Okta, Inc. and/or its affiliates. All rights reserved.\n * The Okta software accompanied by this notice is provided pursuant to the Apache License, Version 2.0 (the \"License.\")\n *\n * You may obtain a copy of the License at http://www.apache.org/licenses/LICENSE-2.0.\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS, WITHOUT\n * WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n *\n * See the License for the specific language governing permissions and limitations under the License.\n */\nimport CustomError from './CustomError';\nexport default class AuthPollStopError extends CustomError {\n    constructor() {\n        const message = 'The poll was stopped by the sdk';\n        super(message);\n    }\n}\n","/*!\n * Copyright (c) 2015-present, Okta, Inc. and/or its affiliates. All rights reserved.\n * The Okta software accompanied by this notice is provided pursuant to the Apache License, Version 2.0 (the \"License.\")\n *\n * You may obtain a copy of the License at http://www.apache.org/licenses/LICENSE-2.0.\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS, WITHOUT\n * WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n *\n * See the License for the specific language governing permissions and limitations under the License.\n */\nimport CustomError from './CustomError';\nexport default class AuthSdkError extends CustomError {\n    constructor(msg, xhr) {\n        super(msg);\n        this.name = 'AuthSdkError';\n        this.errorCode = 'INTERNAL';\n        this.errorSummary = msg;\n        this.errorLink = 'INTERNAL';\n        this.errorId = 'INTERNAL';\n        this.errorCauses = [];\n        if (xhr) {\n            this.xhr = xhr;\n        }\n    }\n}\n","/*!\n * Copyright (c) 2015-present, Okta, Inc. and/or its affiliates. All rights reserved.\n * The Okta software accompanied by this notice is provided pursuant to the Apache License, Version 2.0 (the \"License.\")\n *\n * You may obtain a copy of the License at http://www.apache.org/licenses/LICENSE-2.0.\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS, WITHOUT\n * WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n *\n * See the License for the specific language governing permissions and limitations under the License.\n */\nexport default class CustomError extends Error {\n    constructor(message) {\n        // https://stackoverflow.com/questions/41102060/typescript-extending-error-class\n        super(message); // 'Error' breaks prototype chain here\n        Object.setPrototypeOf(this, new.target.prototype); // restore prototype chain\n    }\n}\n","/*!\n * Copyright (c) 2015-present, Okta, Inc. and/or its affiliates. All rights reserved.\n * The Okta software accompanied by this notice is provided pursuant to the Apache License, Version 2.0 (the \"License.\")\n *\n * You may obtain a copy of the License at http://www.apache.org/licenses/LICENSE-2.0.\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS, WITHOUT\n * WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n *\n * See the License for the specific language governing permissions and limitations under the License.\n */\nimport CustomError from './CustomError';\nexport default class OAuthError extends CustomError {\n    constructor(errorCode, summary) {\n        super(summary);\n        this.name = 'OAuthError';\n        this.errorCode = errorCode;\n        this.errorSummary = summary;\n    }\n}\n","/*!\n * Copyright (c) 2015-present, Okta, Inc. and/or its affiliates. All rights reserved.\n * The Okta software accompanied by this notice is provided pursuant to the Apache License, Version 2.0 (the \"License.\")\n *\n * You may obtain a copy of the License at http://www.apache.org/licenses/LICENSE-2.0.\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS, WITHOUT\n * WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n *\n * See the License for the specific language governing permissions and limitations under the License.\n */\nimport AuthApiError from './AuthApiError';\nimport AuthPollStopError from './AuthPollStopError';\nimport AuthSdkError from './AuthSdkError';\nimport OAuthError from './OAuthError';\nexport { AuthApiError, AuthPollStopError, AuthSdkError, OAuthError };\n","/*!\n * Copyright (c) 2018-present, Okta, Inc. and/or its affiliates. All rights reserved.\n * The Okta software accompanied by this notice is provided pursuant to the Apache License, Version 2.0 (the \"License.\")\n *\n * You may obtain a copy of the License at http://www.apache.org/licenses/LICENSE-2.0.\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS, WITHOUT\n * WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n *\n * See the License for the specific language governing permissions and limitations under the License.\n */\nimport fetch from 'cross-fetch';\nfunction readData(response) {\n    if (response.headers.get('Content-Type') &&\n        response.headers.get('Content-Type').toLowerCase().indexOf('application/json') >= 0) {\n        return response.json()\n            // JSON parse can fail if response is not a valid object\n            .catch(e => {\n            return {\n                error: e,\n                errorSummary: 'Could not parse server response'\n            };\n        });\n    }\n    else {\n        return response.text();\n    }\n}\nfunction formatResult(status, data) {\n    const isObject = typeof data === 'object';\n    const result = {\n        responseText: isObject ? JSON.stringify(data) : data,\n        status: status\n    };\n    if (isObject) {\n        result.responseType = 'json';\n        result.responseJSON = data;\n    }\n    return result;\n}\n/* eslint-disable complexity */\nfunction fetchRequest(method, url, args) {\n    var body = args.data;\n    var headers = args.headers || {};\n    var contentType = (headers['Content-Type'] || headers['content-type'] || '');\n    // JSON encode body (if appropriate)\n    if (contentType === 'application/json' && body && typeof body !== 'string') {\n        body = JSON.stringify(body);\n    }\n    var fetchPromise = fetch(url, {\n        method: method,\n        headers: args.headers,\n        body: body,\n        credentials: args.withCredentials ? 'include' : 'omit'\n    })\n        .then(function (response) {\n        var error = !response.ok;\n        var status = response.status;\n        return readData(response)\n            .then(data => {\n            return formatResult(status, data);\n        })\n            .then(result => {\n            if (error) {\n                // Throwing result object since error handling is done in http.js\n                throw result;\n            }\n            return result;\n        });\n    });\n    return fetchPromise;\n}\nexport default fetchRequest;\n","/*!\n * Copyright (c) 2015-present, Okta, Inc. and/or its affiliates. All rights reserved.\n * The Okta software accompanied by this notice is provided pursuant to the Apache License, Version 2.0 (the \"License.\")\n *\n * You may obtain a copy of the License at http://www.apache.org/licenses/LICENSE-2.0.\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS, WITHOUT\n * WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n *\n * See the License for the specific language governing permissions and limitations under the License.\n *\n */\n/* eslint-disable complexity */\nimport { isString, clone, isAbsoluteUrl, removeNils } from './util';\nimport AuthApiError from './errors/AuthApiError';\nimport { STATE_TOKEN_KEY_NAME, DEFAULT_CACHE_DURATION } from './constants';\nfunction httpRequest(sdk, options) {\n    options = options || {};\n    var url = options.url, method = options.method, args = options.args, saveAuthnState = options.saveAuthnState, accessToken = options.accessToken, withCredentials = options.withCredentials !== false, // default value is true\n    storageUtil = sdk.options.storageUtil, storage = storageUtil.storage, httpCache = storageUtil.getHttpCache(sdk.options.cookies);\n    if (options.cacheResponse) {\n        var cacheContents = httpCache.getStorage();\n        var cachedResponse = cacheContents[url];\n        if (cachedResponse && Date.now() / 1000 < cachedResponse.expiresAt) {\n            return Promise.resolve(cachedResponse.response);\n        }\n    }\n    var headers = {\n        'Accept': 'application/json',\n        'Content-Type': 'application/json',\n        'X-Okta-User-Agent-Extended': sdk.userAgent\n    };\n    Object.assign(headers, sdk.options.headers, options.headers);\n    headers = removeNils(headers);\n    if (accessToken && isString(accessToken)) {\n        headers['Authorization'] = 'Bearer ' + accessToken;\n    }\n    var ajaxOptions = {\n        headers: headers,\n        data: args || undefined,\n        withCredentials: withCredentials\n    };\n    var err, res;\n    return sdk.options.httpRequestClient(method, url, ajaxOptions)\n        .then(function (resp) {\n        res = resp.responseText;\n        if (res && isString(res)) {\n            res = JSON.parse(res);\n        }\n        if (saveAuthnState) {\n            if (!res.stateToken) {\n                storage.delete(STATE_TOKEN_KEY_NAME);\n            }\n        }\n        if (res && res.stateToken && res.expiresAt) {\n            storage.set(STATE_TOKEN_KEY_NAME, res.stateToken, res.expiresAt, sdk.options.cookies);\n        }\n        if (res && options.cacheResponse) {\n            httpCache.updateStorage(url, {\n                expiresAt: Math.floor(Date.now() / 1000) + DEFAULT_CACHE_DURATION,\n                response: res\n            });\n        }\n        return res;\n    })\n        .catch(function (resp) {\n        var serverErr = resp.responseText || {};\n        if (isString(serverErr)) {\n            try {\n                serverErr = JSON.parse(serverErr);\n            }\n            catch (e) {\n                serverErr = {\n                    errorSummary: 'Unknown error'\n                };\n            }\n        }\n        if (resp.status >= 500) {\n            serverErr.errorSummary = 'Unknown error';\n        }\n        if (sdk.options.transformErrorXHR) {\n            resp = sdk.options.transformErrorXHR(clone(resp));\n        }\n        err = new AuthApiError(serverErr, resp);\n        if (err.errorCode === 'E0000011') {\n            storage.delete(STATE_TOKEN_KEY_NAME);\n        }\n        throw err;\n    });\n}\nfunction get(sdk, url, options) {\n    url = isAbsoluteUrl(url) ? url : sdk.getIssuerOrigin() + url;\n    var getOptions = {\n        url: url,\n        method: 'GET'\n    };\n    Object.assign(getOptions, options);\n    return httpRequest(sdk, getOptions);\n}\nfunction post(sdk, url, args, options) {\n    url = isAbsoluteUrl(url) ? url : sdk.getIssuerOrigin() + url;\n    var postOptions = {\n        url: url,\n        method: 'POST',\n        args: args,\n        saveAuthnState: true\n    };\n    Object.assign(postOptions, options);\n    return httpRequest(sdk, postOptions);\n}\nexport default {\n    get: get,\n    post: post,\n    httpRequest: httpRequest\n};\n","/*!\n * Copyright (c) 2015-present, Okta, Inc. and/or its affiliates. All rights reserved.\n * The Okta software accompanied by this notice is provided pursuant to the Apache License, Version 2.0 (the \"License.\")\n *\n * You may obtain a copy of the License at http://www.apache.org/licenses/LICENSE-2.0.\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS, WITHOUT\n * WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n *\n * See the License for the specific language governing permissions and limitations under the License.\n *\n */\n/* global window, document */\n/* eslint-disable complexity, max-statements */\nimport http from './http';\nimport { genRandomString, isIE11OrLess, find, removeTrailingSlash } from './util';\nimport storageUtil from './browser/browserStorage';\nimport AuthSdkError from './errors/AuthSdkError';\nfunction generateState() {\n    return genRandomString(64);\n}\nfunction generateNonce() {\n    return genRandomString(64);\n}\nfunction addListener(eventTarget, name, fn) {\n    if (eventTarget.addEventListener) {\n        eventTarget.addEventListener(name, fn);\n    }\n    else {\n        eventTarget.attachEvent('on' + name, fn);\n    }\n}\nfunction removeListener(eventTarget, name, fn) {\n    if (eventTarget.removeEventListener) {\n        eventTarget.removeEventListener(name, fn);\n    }\n    else {\n        eventTarget.detachEvent('on' + name, fn);\n    }\n}\nfunction loadFrame(src) {\n    var iframe = document.createElement('iframe');\n    iframe.style.display = 'none';\n    iframe.src = src;\n    return document.body.appendChild(iframe);\n}\nfunction loadPopup(src, options) {\n    var title = options.popupTitle || 'External Identity Provider User Authentication';\n    var appearance = 'toolbar=no, scrollbars=yes, resizable=yes, ' +\n        'top=100, left=500, width=600, height=600';\n    if (isIE11OrLess()) {\n        // IE<=11 doesn't fully support postMessage at time of writting.\n        // the following simple solution happened to solve the issue\n        // without adding another proxy layer which makes flow more complecated.\n        var winEl = window.open('/', title, appearance);\n        winEl.location.href = src;\n        return winEl;\n    }\n    else {\n        return window.open(src, title, appearance);\n    }\n}\nfunction getWellKnown(sdk, issuer) {\n    var authServerUri = (issuer || sdk.options.issuer);\n    return http.get(sdk, authServerUri + '/.well-known/openid-configuration', {\n        cacheResponse: true\n    });\n}\nfunction getKey(sdk, issuer, kid) {\n    var httpCache = storageUtil.getHttpCache(sdk.options.cookies);\n    return getWellKnown(sdk, issuer)\n        .then(function (wellKnown) {\n        var jwksUri = wellKnown['jwks_uri'];\n        // Check our kid against the cached version (if it exists and isn't expired)\n        var cacheContents = httpCache.getStorage();\n        var cachedResponse = cacheContents[jwksUri];\n        if (cachedResponse && Date.now() / 1000 < cachedResponse.expiresAt) {\n            var cachedKey = find(cachedResponse.response.keys, {\n                kid: kid\n            });\n            if (cachedKey) {\n                return cachedKey;\n            }\n        }\n        // Remove cache for the key\n        httpCache.clearStorage(jwksUri);\n        // Pull the latest keys if the key wasn't in the cache\n        return http.get(sdk, jwksUri, {\n            cacheResponse: true\n        })\n            .then(function (res) {\n            var key = find(res.keys, {\n                kid: kid\n            });\n            if (key) {\n                return key;\n            }\n            throw new AuthSdkError('The key id, ' + kid + ', was not found in the server\\'s keys');\n        });\n    });\n}\nfunction validateClaims(sdk, claims, validationParams) {\n    var aud = validationParams.clientId;\n    var iss = validationParams.issuer;\n    var nonce = validationParams.nonce;\n    if (!claims || !iss || !aud) {\n        throw new AuthSdkError('The jwt, iss, and aud arguments are all required');\n    }\n    if (nonce && claims.nonce !== nonce) {\n        throw new AuthSdkError('OAuth flow response nonce doesn\\'t match request nonce');\n    }\n    var now = Math.floor(Date.now() / 1000);\n    if (claims.iss !== iss) {\n        throw new AuthSdkError('The issuer [' + claims.iss + '] ' +\n            'does not match [' + iss + ']');\n    }\n    if (claims.aud !== aud) {\n        throw new AuthSdkError('The audience [' + claims.aud + '] ' +\n            'does not match [' + aud + ']');\n    }\n    if (claims.iat > claims.exp) {\n        throw new AuthSdkError('The JWT expired before it was issued');\n    }\n    if ((now - sdk.options.maxClockSkew) > claims.exp) {\n        throw new AuthSdkError('The JWT expired and is no longer valid');\n    }\n    if (claims.iat > (now + sdk.options.maxClockSkew)) {\n        throw new AuthSdkError('The JWT was issued in the future');\n    }\n}\nfunction getOAuthUrls(sdk, options) {\n    if (arguments.length > 2) {\n        throw new AuthSdkError('As of version 3.0, \"getOAuthUrls\" takes only a single set of options');\n    }\n    options = options || {};\n    // Get user-supplied arguments\n    var authorizeUrl = removeTrailingSlash(options.authorizeUrl) || sdk.options.authorizeUrl;\n    var issuer = removeTrailingSlash(options.issuer) || sdk.options.issuer;\n    var userinfoUrl = removeTrailingSlash(options.userinfoUrl) || sdk.options.userinfoUrl;\n    var tokenUrl = removeTrailingSlash(options.tokenUrl) || sdk.options.tokenUrl;\n    var logoutUrl = removeTrailingSlash(options.logoutUrl) || sdk.options.logoutUrl;\n    var revokeUrl = removeTrailingSlash(options.revokeUrl) || sdk.options.revokeUrl;\n    var baseUrl = issuer.indexOf('/oauth2') > 0 ? issuer : issuer + '/oauth2';\n    authorizeUrl = authorizeUrl || baseUrl + '/v1/authorize';\n    userinfoUrl = userinfoUrl || baseUrl + '/v1/userinfo';\n    tokenUrl = tokenUrl || baseUrl + '/v1/token';\n    revokeUrl = revokeUrl || baseUrl + '/v1/revoke';\n    logoutUrl = logoutUrl || baseUrl + '/v1/logout';\n    return {\n        issuer: issuer,\n        authorizeUrl: authorizeUrl,\n        userinfoUrl: userinfoUrl,\n        tokenUrl: tokenUrl,\n        revokeUrl: revokeUrl,\n        logoutUrl: logoutUrl\n    };\n}\nfunction urlParamsToObject(hashOrSearch) {\n    // Predefine regexs for parsing hash\n    var plus2space = /\\+/g;\n    var paramSplit = /([^&=]+)=?([^&]*)/g;\n    var fragment = hashOrSearch;\n    // Some hash based routers will automatically add a / character after the hash\n    if (fragment.charAt(0) === '#' && fragment.charAt(1) === '/') {\n        fragment = fragment.substring(2);\n    }\n    // Remove the leading # or ?\n    if (fragment.charAt(0) === '#' || fragment.charAt(0) === '?') {\n        fragment = fragment.substring(1);\n    }\n    var obj = {};\n    // Loop until we have no more params\n    var param;\n    while (true) { // eslint-disable-line no-constant-condition\n        param = paramSplit.exec(fragment);\n        if (!param) {\n            break;\n        }\n        var key = param[1];\n        var value = param[2];\n        // id_token should remain base64url encoded\n        if (key === 'id_token' || key === 'access_token' || key === 'code') {\n            obj[key] = value;\n        }\n        else {\n            obj[key] = decodeURIComponent(value.replace(plus2space, ' '));\n        }\n    }\n    return obj;\n}\nfunction hasTokensInHash(hash) {\n    return /((id|access)_token=)/i.test(hash);\n}\nfunction hasCodeInUrl(hashOrSearch) {\n    return /(code=)/i.test(hashOrSearch);\n}\n/**\n * Check if tokens or a code have been passed back into the url, which happens in\n * the social auth IDP redirect flow.\n */\nfunction isLoginRedirect(sdk) {\n    var authParams = sdk.options;\n    if (authParams.pkce || authParams.responseType === 'code' || authParams.responseMode === 'query') {\n        // Look for code\n        return authParams.responseMode === 'fragment' ?\n            hasCodeInUrl(window.location.hash) :\n            hasCodeInUrl(window.location.search);\n    }\n    // Look for tokens (Implicit OIDC flow)\n    return hasTokensInHash(window.location.hash);\n}\nexport { generateState, generateNonce, getWellKnown, getKey, validateClaims, getOAuthUrls, loadFrame, loadPopup, urlParamsToObject, isLoginRedirect, addListener, removeListener };\n","/*!\n * Copyright (c) 2019-present, Okta, Inc. and/or its affiliates. All rights reserved.\n * The Okta software accompanied by this notice is provided pursuant to the Apache License, Version 2.0 (the \"License.\")\n *\n * You may obtain a copy of the License at http://www.apache.org/licenses/LICENSE-2.0.\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS, WITHOUT\n * WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n *\n * See the License for the specific language governing permissions and limitations under the License.\n *\n */\n/* global crypto */\n/* eslint-disable complexity, max-statements */\nimport AuthSdkError from './errors/AuthSdkError';\nimport http from './http';\nimport { warn, stringToBase64Url, removeNils, toQueryString } from './util';\n// Code verifier: Random URL-safe string with a minimum length of 43 characters.\n// Code challenge: Base64 URL-encoded SHA-256 hash of the code verifier.\nvar MIN_VERIFIER_LENGTH = 43;\nvar MAX_VERIFIER_LENGTH = 128;\nvar DEFAULT_CODE_CHALLENGE_METHOD = 'S256';\nfunction dec2hex(dec) {\n    return ('0' + dec.toString(16)).substr(-2);\n}\nfunction getRandomString(length) {\n    var a = new Uint8Array(Math.ceil(length / 2));\n    crypto.getRandomValues(a);\n    var str = Array.from(a, dec2hex).join('');\n    return str.slice(0, length);\n}\nfunction generateVerifier(prefix) {\n    var verifier = prefix || '';\n    if (verifier.length < MIN_VERIFIER_LENGTH) {\n        verifier = verifier + getRandomString(MIN_VERIFIER_LENGTH - verifier.length);\n    }\n    return encodeURIComponent(verifier).slice(0, MAX_VERIFIER_LENGTH);\n}\nfunction getStorage(sdk, options) {\n    options = Object.assign({}, sdk.options.cookies, options);\n    return sdk.options.storageUtil.getPKCEStorage(options);\n}\nfunction saveMeta(sdk, meta) {\n    // There must be only one PKCE flow executing at a time.\n    // Before saving meta, check to see if a codeVerfier is already stored.\n    var storage = getStorage(sdk, { preferLocalStorage: true });\n    var obj = storage.getStorage();\n    if (obj.codeVerifier) {\n        // eslint-disable-next-line max-len\n        warn('saveMeta: PKCE codeVerifier exists in localStorage. This may indicate an auth flow is already in progress.');\n    }\n    storage = getStorage(sdk);\n    obj = storage.getStorage();\n    if (obj.codeVerifier) {\n        // eslint-disable-next-line max-len\n        warn('saveMeta: PKCE codeVerifier exists in sessionStorage. This may indicate an auth flow is already in progress.');\n    }\n    // clear all PKCE meta storage before saving.\n    clearMeta(sdk);\n    storage.setStorage(meta);\n}\nfunction loadMeta(sdk) {\n    // Try reading from localStorage first.\n    // This is for compatibility with older versions of the signin widget. OKTA-304806\n    var storage = getStorage(sdk, { preferLocalStorage: true });\n    var obj = storage.getStorage();\n    // Verify the Meta\n    if (!obj.codeVerifier) {\n        // If meta is not valid, read from sessionStorage. This is expected for current versions of the SDK.\n        storage = getStorage(sdk, { preferLocalStorage: false });\n        obj = storage.getStorage();\n        if (!obj.codeVerifier) {\n            // If meta is not valid, throw an exception to avoid misleading server-side error\n            // The most likely cause of this error is trying to handle a callback twice\n            // eslint-disable-next-line max-len\n            throw new AuthSdkError('Could not load PKCE codeVerifier from storage. This may indicate the auth flow has already completed or multiple auth flows are executing concurrently.', null);\n        }\n    }\n    return obj;\n}\nfunction clearMeta(sdk) {\n    // clear sessionStorage (current version)\n    var storage = getStorage(sdk);\n    storage.clearStorage();\n    // clear localStorage (previous versions, signin widget)\n    storage = getStorage(sdk, { preferLocalStorage: true });\n    storage.clearStorage();\n}\nfunction computeChallenge(str) {\n    var buffer = new TextEncoder().encode(str);\n    return crypto.subtle.digest('SHA-256', buffer).then(function (arrayBuffer) {\n        var hash = String.fromCharCode.apply(null, new Uint8Array(arrayBuffer));\n        var b64u = stringToBase64Url(hash); // url-safe base64 variant\n        return b64u;\n    });\n}\nfunction validateOptions(options) {\n    // Quick validation\n    if (!options.clientId) {\n        throw new AuthSdkError('A clientId must be specified in the OktaAuth constructor to get a token');\n    }\n    if (!options.redirectUri) {\n        throw new AuthSdkError('The redirectUri passed to /authorize must also be passed to /token');\n    }\n    if (!options.authorizationCode) {\n        throw new AuthSdkError('An authorization code (returned from /authorize) must be passed to /token');\n    }\n    if (!options.codeVerifier) {\n        throw new AuthSdkError('The \"codeVerifier\" (generated and saved by your app) must be passed to /token');\n    }\n}\nfunction getPostData(options) {\n    // Convert options to OAuth params\n    var params = removeNils({\n        'client_id': options.clientId,\n        'redirect_uri': options.redirectUri,\n        'grant_type': 'authorization_code',\n        'code': options.authorizationCode,\n        'code_verifier': options.codeVerifier\n    });\n    // Encode as URL string\n    return toQueryString(params).slice(1);\n}\n// exchange authorization code for an access token\nfunction getToken(sdk, options, urls) {\n    validateOptions(options);\n    var data = getPostData(options);\n    return http.httpRequest(sdk, {\n        url: urls.tokenUrl,\n        method: 'POST',\n        args: data,\n        withCredentials: false,\n        headers: {\n            'Content-Type': 'application/x-www-form-urlencoded'\n        }\n    });\n}\nexport default {\n    DEFAULT_CODE_CHALLENGE_METHOD: DEFAULT_CODE_CHALLENGE_METHOD,\n    generateVerifier: generateVerifier,\n    clearMeta: clearMeta,\n    saveMeta: saveMeta,\n    loadMeta: loadMeta,\n    computeChallenge: computeChallenge,\n    getToken: getToken\n};\n","/*!\n * Copyright (c) 2015-present, Okta, Inc. and/or its affiliates. All rights reserved.\n * The Okta software accompanied by this notice is provided pursuant to the Apache License, Version 2.0 (the \"License.\")\n *\n * You may obtain a copy of the License at http://www.apache.org/licenses/LICENSE-2.0.\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS, WITHOUT\n * WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n *\n * See the License for the specific language governing permissions and limitations under the License.\n *\n */\n/* global window */\nimport { omit, getLink, toQueryString } from './util';\nimport http from './http';\nfunction sessionExists(sdk) {\n    return sdk.session.get()\n        .then(function (res) {\n        if (res.status === 'ACTIVE') {\n            return true;\n        }\n        return false;\n    })\n        .catch(function () {\n        return false;\n    });\n}\nfunction getSession(sdk) {\n    return http.get(sdk, '/api/v1/sessions/me')\n        .then(function (session) {\n        var res = omit(session, '_links');\n        res.refresh = function () {\n            return http.post(sdk, getLink(session, 'refresh').href);\n        };\n        res.user = function () {\n            return http.get(sdk, getLink(session, 'user').href);\n        };\n        return res;\n    })\n        .catch(function () {\n        // Return INACTIVE status on failure\n        return { status: 'INACTIVE' };\n    });\n}\nfunction closeSession(sdk) {\n    return http.httpRequest(sdk, {\n        url: sdk.getIssuerOrigin() + '/api/v1/sessions/me',\n        method: 'DELETE'\n    });\n}\nfunction refreshSession(sdk) {\n    return http.post(sdk, '/api/v1/sessions/me/lifecycle/refresh');\n}\nfunction setCookieAndRedirect(sdk, sessionToken, redirectUrl) {\n    redirectUrl = redirectUrl || window.location.href;\n    window.location.assign(sdk.getIssuerOrigin() + '/login/sessionCookieRedirect' +\n        toQueryString({\n            checkAccountSetupComplete: true,\n            token: sessionToken,\n            redirectUrl: redirectUrl\n        }));\n}\nexport { sessionExists, getSession, closeSession, refreshSession, setCookieAndRedirect };\n","/*!\n * Copyright (c) 2015-present, Okta, Inc. and/or its affiliates. All rights reserved.\n * The Okta software accompanied by this notice is provided pursuant to the Apache License, Version 2.0 (the \"License.\")\n *\n * You may obtain a copy of the License at http://www.apache.org/licenses/LICENSE-2.0.\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS, WITHOUT\n * WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n *\n * See the License for the specific language governing permissions and limitations under the License.\n *\n */\nimport AuthSdkError from './errors/AuthSdkError';\n// storage must have getItem and setItem\nfunction storageBuilder(webstorage, storageName) {\n    if (typeof storageName !== 'string' || !storageName.length) {\n        throw new AuthSdkError('\"storageName\" is required');\n    }\n    function getStorage() {\n        var storageString = webstorage.getItem(storageName);\n        storageString = storageString || '{}';\n        try {\n            return JSON.parse(storageString);\n        }\n        catch (e) {\n            throw new AuthSdkError('Unable to parse storage string: ' + storageName);\n        }\n    }\n    function setStorage(storage) {\n        try {\n            var storageString = JSON.stringify(storage);\n            webstorage.setItem(storageName, storageString);\n        }\n        catch (e) {\n            throw new AuthSdkError('Unable to set storage: ' + storageName);\n        }\n    }\n    function clearStorage(key) {\n        if (!key) {\n            return setStorage({});\n        }\n        var storage = getStorage();\n        delete storage[key];\n        setStorage(storage);\n    }\n    function updateStorage(key, value) {\n        var storage = getStorage();\n        storage[key] = value;\n        setStorage(storage);\n    }\n    return {\n        getStorage: getStorage,\n        setStorage: setStorage,\n        clearStorage: clearStorage,\n        updateStorage: updateStorage\n    };\n}\nexport default storageBuilder;\n","/*!\n * Copyright (c) 2015-present, Okta, Inc. and/or its affiliates. All rights reserved.\n * The Okta software accompanied by this notice is provided pursuant to the Apache License, Version 2.0 (the \"License.\")\n *\n * You may obtain a copy of the License at http://www.apache.org/licenses/LICENSE-2.0.\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS, WITHOUT\n * WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n *\n * See the License for the specific language governing permissions and limitations under the License.\n *\n */\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\n/* global window, document, btoa */\n/* eslint-disable complexity, max-statements */\nimport http from './http';\nimport { toQueryString, base64UrlToString, clone, isString, removeNils, isFunction } from './util';\nimport { getOAuthUrls, validateClaims, getKey, addListener, removeListener, urlParamsToObject, generateState, generateNonce, loadFrame, loadPopup, getWellKnown, isLoginRedirect } from './oauthUtil';\nimport * as sdkCrypto from './crypto';\nimport AuthSdkError from './errors/AuthSdkError';\nimport OAuthError from './errors/OAuthError';\nimport { ACCESS_TOKEN_STORAGE_KEY, ID_TOKEN_STORAGE_KEY, REDIRECT_OAUTH_PARAMS_NAME, REDIRECT_NONCE_COOKIE_NAME, REDIRECT_STATE_COOKIE_NAME } from './constants';\nimport browserStorage from './browser/browserStorage';\nimport PKCE from './pkce';\nimport { isToken, isAccessToken, isIDToken } from './types';\nconst cookies = browserStorage.storage;\n// Only the access token can be revoked in SPA applications\nfunction revokeToken(sdk, token) {\n    return Promise.resolve()\n        .then(function () {\n        if (!token || !token.accessToken) {\n            throw new AuthSdkError('A valid access token object is required');\n        }\n        var clientId = sdk.options.clientId;\n        if (!clientId) {\n            throw new AuthSdkError('A clientId must be specified in the OktaAuth constructor to revoke a token');\n        }\n        var revokeUrl = getOAuthUrls(sdk).revokeUrl;\n        var accessToken = token.accessToken;\n        var args = toQueryString({\n            // eslint-disable-next-line camelcase\n            token_type_hint: 'access_token',\n            token: accessToken\n        }).slice(1);\n        var creds = btoa(clientId);\n        return http.post(sdk, revokeUrl, args, {\n            headers: {\n                'Content-Type': 'application/x-www-form-urlencoded',\n                'Authorization': 'Basic ' + creds\n            }\n        });\n    });\n}\nfunction decodeToken(token) {\n    var jwt = token.split('.');\n    var decodedToken;\n    try {\n        decodedToken = {\n            header: JSON.parse(base64UrlToString(jwt[0])),\n            payload: JSON.parse(base64UrlToString(jwt[1])),\n            signature: jwt[2]\n        };\n    }\n    catch (e) {\n        throw new AuthSdkError('Malformed token');\n    }\n    return decodedToken;\n}\n// Verify the id token\nfunction verifyToken(sdk, token, validationParams) {\n    return Promise.resolve()\n        .then(function () {\n        if (!token || !token.idToken) {\n            throw new AuthSdkError('Only idTokens may be verified');\n        }\n        var jwt = decodeToken(token.idToken);\n        var validationOptions = {\n            clientId: sdk.options.clientId,\n            issuer: sdk.options.issuer,\n            ignoreSignature: sdk.options.ignoreSignature\n        };\n        Object.assign(validationOptions, validationParams);\n        // Standard claim validation\n        validateClaims(sdk, jwt.payload, validationOptions);\n        // If the browser doesn't support native crypto or we choose not\n        // to verify the signature, bail early\n        if (validationOptions.ignoreSignature == true || !sdk.features.isTokenVerifySupported()) {\n            return token;\n        }\n        return getKey(sdk, token.issuer, jwt.header.kid)\n            .then(function (key) {\n            return sdkCrypto.verifyToken(token.idToken, key);\n        })\n            .then(function (valid) {\n            if (!valid) {\n                throw new AuthSdkError('The token signature is not valid');\n            }\n            if (validationParams && validationParams.accessToken && token.claims.at_hash) {\n                return sdkCrypto.getOidcHash(validationParams.accessToken)\n                    .then(hash => {\n                    if (hash !== token.claims.at_hash) {\n                        throw new AuthSdkError('Token hash verification failed');\n                    }\n                });\n            }\n        })\n            .then(() => {\n            return token;\n        });\n    });\n}\nfunction addPostMessageListener(sdk, timeout, state) {\n    var responseHandler;\n    var timeoutId;\n    var msgReceivedOrTimeout = new Promise(function (resolve, reject) {\n        responseHandler = function responseHandler(e) {\n            if (!e.data || e.data.state !== state) {\n                // A message not meant for us\n                return;\n            }\n            // Configuration mismatch between saved token and current app instance\n            // This may happen if apps with different issuers are running on the same host url\n            // If they share the same storage key, they may read and write tokens in the same location.\n            // Common when developing against http://localhost\n            if (e.origin !== sdk.getIssuerOrigin()) {\n                return reject(new AuthSdkError('The request does not match client configuration'));\n            }\n            resolve(e.data);\n        };\n        addListener(window, 'message', responseHandler);\n        timeoutId = setTimeout(function () {\n            reject(new AuthSdkError('OAuth flow timed out'));\n        }, timeout || 120000);\n    });\n    return msgReceivedOrTimeout\n        .finally(function () {\n        clearTimeout(timeoutId);\n        removeListener(window, 'message', responseHandler);\n    });\n}\nfunction exchangeCodeForToken(sdk, oauthParams, authorizationCode, urls) {\n    // PKCE authorization_code flow\n    // Retrieve saved values and build oauthParams for call to /token\n    var meta = PKCE.loadMeta(sdk);\n    var getTokenParams = {\n        clientId: oauthParams.clientId,\n        authorizationCode: authorizationCode,\n        codeVerifier: meta.codeVerifier,\n        redirectUri: meta.redirectUri\n    };\n    return PKCE.getToken(sdk, getTokenParams, urls)\n        .then(function (res) {\n        validateResponse(res, getTokenParams);\n        return res;\n    })\n        .finally(function () {\n        PKCE.clearMeta(sdk);\n    });\n}\nfunction validateResponse(res, oauthParams) {\n    if (res['error'] || res['error_description']) {\n        throw new OAuthError(res['error'], res['error_description']);\n    }\n    if (res.state !== oauthParams.state) {\n        throw new AuthSdkError('OAuth flow response state doesn\\'t match request state');\n    }\n}\n// eslint-disable-next-line max-len\nfunction handleOAuthResponse(sdk, tokenParams, res, urls) {\n    urls = urls || {};\n    var responseType = tokenParams.responseType;\n    if (!Array.isArray(responseType)) {\n        responseType = [responseType];\n    }\n    var scopes = clone(tokenParams.scopes);\n    var clientId = tokenParams.clientId || sdk.options.clientId;\n    var pkce = sdk.options.pkce !== false;\n    return Promise.resolve()\n        .then(function () {\n        validateResponse(res, tokenParams);\n        // PKCE flow\n        // We do not support \"hybrid\" scenarios where the response includes both a code and a token.\n        // If the response contains a code it is used immediately to obtain new tokens.\n        if (res.code && pkce) {\n            // responseType is not sent to the token endpoint.\n            // We populate this array to validate the response below\n            responseType = ['token']; // an accessToken will always be returned\n            if (scopes.indexOf('openid') !== -1) {\n                responseType.push('id_token'); // an idToken will be returned if \"openid\" is in the scopes\n            }\n            return exchangeCodeForToken(sdk, tokenParams, res.code, urls);\n        }\n        return res;\n    }).then(function (res) {\n        var tokenDict = {};\n        var expiresIn = res.expires_in;\n        var tokenType = res.token_type;\n        var accessToken = res.access_token;\n        var idToken = res.id_token;\n        if (accessToken) {\n            tokenDict.accessToken = {\n                value: accessToken,\n                accessToken: accessToken,\n                expiresAt: Number(expiresIn) + Math.floor(Date.now() / 1000),\n                tokenType: tokenType,\n                scopes: scopes,\n                authorizeUrl: urls.authorizeUrl,\n                userinfoUrl: urls.userinfoUrl\n            };\n        }\n        if (idToken) {\n            var jwt = sdk.token.decode(idToken);\n            var idTokenObj = {\n                value: idToken,\n                idToken: idToken,\n                claims: jwt.payload,\n                expiresAt: jwt.payload.exp,\n                scopes: scopes,\n                authorizeUrl: urls.authorizeUrl,\n                issuer: urls.issuer,\n                clientId: clientId\n            };\n            var validationParams = {\n                clientId: clientId,\n                issuer: urls.issuer,\n                nonce: tokenParams.nonce,\n                accessToken: accessToken\n            };\n            if (tokenParams.ignoreSignature !== undefined) {\n                validationParams.ignoreSignature = tokenParams.ignoreSignature;\n            }\n            return verifyToken(sdk, idTokenObj, validationParams)\n                .then(function () {\n                tokenDict.idToken = idTokenObj;\n                return tokenDict;\n            });\n        }\n        return tokenDict;\n    })\n        .then(function (tokenDict) {\n        // Validate received tokens against requested response types \n        if (responseType.indexOf('token') !== -1 && !tokenDict.accessToken) {\n            // eslint-disable-next-line max-len\n            throw new AuthSdkError('Unable to parse OAuth flow response: response type \"token\" was requested but \"access_token\" was not returned.');\n        }\n        if (responseType.indexOf('id_token') !== -1 && !tokenDict.idToken) {\n            // eslint-disable-next-line max-len\n            throw new AuthSdkError('Unable to parse OAuth flow response: response type \"id_token\" was requested but \"id_token\" was not returned.');\n        }\n        return {\n            tokens: tokenDict,\n            state: res.state,\n            code: res.code\n        };\n    });\n}\nfunction getDefaultTokenParams(sdk) {\n    return {\n        pkce: sdk.options.pkce,\n        clientId: sdk.options.clientId,\n        redirectUri: sdk.options.redirectUri || window.location.href,\n        responseType: ['token', 'id_token'],\n        responseMode: sdk.options.responseMode,\n        state: generateState(),\n        nonce: generateNonce(),\n        scopes: ['openid', 'email'],\n        ignoreSignature: sdk.options.ignoreSignature\n    };\n}\nfunction convertTokenParamsToOAuthParams(tokenParams) {\n    // Quick validation\n    if (!tokenParams.clientId) {\n        throw new AuthSdkError('A clientId must be specified in the OktaAuth constructor to get a token');\n    }\n    if (isString(tokenParams.responseType) && tokenParams.responseType.indexOf(' ') !== -1) {\n        throw new AuthSdkError('Multiple OAuth responseTypes must be defined as an array');\n    }\n    // Convert our params to their actual OAuth equivalents\n    var oauthParams = {\n        'client_id': tokenParams.clientId,\n        'code_challenge': tokenParams.codeChallenge,\n        'code_challenge_method': tokenParams.codeChallengeMethod,\n        'display': tokenParams.display,\n        'idp': tokenParams.idp,\n        'idp_scope': tokenParams.idpScope,\n        'login_hint': tokenParams.loginHint,\n        'max_age': tokenParams.maxAge,\n        'nonce': tokenParams.nonce,\n        'prompt': tokenParams.prompt,\n        'redirect_uri': tokenParams.redirectUri,\n        'response_mode': tokenParams.responseMode,\n        'response_type': tokenParams.responseType,\n        'sessionToken': tokenParams.sessionToken,\n        'state': tokenParams.state,\n    };\n    oauthParams = removeNils(oauthParams);\n    ['idp_scope', 'response_type'].forEach(function (mayBeArray) {\n        if (Array.isArray(oauthParams[mayBeArray])) {\n            oauthParams[mayBeArray] = oauthParams[mayBeArray].join(' ');\n        }\n    });\n    if (tokenParams.responseType.indexOf('id_token') !== -1 &&\n        tokenParams.scopes.indexOf('openid') === -1) {\n        throw new AuthSdkError('openid scope must be specified in the scopes argument when requesting an id_token');\n    }\n    else {\n        oauthParams.scope = tokenParams.scopes.join(' ');\n    }\n    return oauthParams;\n}\nfunction buildAuthorizeParams(tokenParams) {\n    var oauthQueryParams = convertTokenParamsToOAuthParams(tokenParams);\n    return toQueryString(oauthQueryParams);\n}\n/*\n * Retrieve an idToken from an Okta or a third party idp\n *\n * Two main flows:\n *\n *  1) Exchange a sessionToken for a token\n *\n *    Required:\n *      clientId: passed via the OktaAuth constructor or into getToken\n *      sessionToken: 'yourtoken'\n *\n *    Optional:\n *      redirectUri: defaults to window.location.href\n *      scopes: defaults to ['openid', 'email']\n *\n *    Forced:\n *      prompt: 'none'\n *      responseMode: 'okta_post_message'\n *      display: undefined\n *\n *  2) Get a token from an idp\n *\n *    Required:\n *      clientId: passed via the OktaAuth constructor or into getToken\n *\n *    Optional:\n *      redirectUri: defaults to window.location.href\n *      scopes: defaults to ['openid', 'email']\n *      idp: defaults to Okta as an idp\n *      prompt: no default. Pass 'none' to throw an error if user is not signed in\n *\n *    Forced:\n *      display: 'popup'\n *\n *  Only common optional params shown. Any OAuth parameters not explicitly forced are available to override\n *\n * @param {Object} oauthOptions\n * @param {String} [oauthOptions.clientId] ID of this client\n * @param {String} [oauthOptions.redirectUri] URI that the iframe or popup will go to once authenticated\n * @param {String[]} [oauthOptions.scopes] OAuth 2.0 scopes to request (openid must be specified)\n * @param {String} [oauthOptions.idp] ID of an external IdP to use for user authentication\n * @param {String} [oauthOptions.sessionToken] Bootstrap Session Token returned by the Okta Authentication API\n * @param {String} [oauthOptions.prompt] Determines whether the Okta login will be displayed on failure.\n *                                       Use 'none' to prevent this behavior\n *\n * @param {Object} options\n * @param {Integer} [options.timeout] Time in ms before the flow is automatically terminated. Defaults to 120000\n * @param {String} [options.popupTitle] Title dispayed in the popup.\n *                                      Defaults to 'External Identity Provider User Authentication'\n */\nfunction getToken(sdk, options) {\n    if (arguments.length > 2) {\n        return Promise.reject(new AuthSdkError('As of version 3.0, \"getToken\" takes only a single set of options'));\n    }\n    options = options || {};\n    return prepareTokenParams(sdk, options)\n        .then(function (tokenParams) {\n        // Start overriding any options that don't make sense\n        var sessionTokenOverrides = {\n            prompt: 'none',\n            responseMode: 'okta_post_message',\n            display: null\n        };\n        var idpOverrides = {\n            display: 'popup'\n        };\n        if (options.sessionToken) {\n            Object.assign(tokenParams, sessionTokenOverrides);\n        }\n        else if (options.idp) {\n            Object.assign(tokenParams, idpOverrides);\n        }\n        // Use the query params to build the authorize url\n        var requestUrl, endpoint, urls;\n        // Get authorizeUrl and issuer\n        urls = getOAuthUrls(sdk, tokenParams);\n        endpoint = options.codeVerifier ? urls.tokenUrl : urls.authorizeUrl;\n        requestUrl = endpoint + buildAuthorizeParams(tokenParams);\n        // Determine the flow type\n        var flowType;\n        if (tokenParams.sessionToken || tokenParams.display === null) {\n            flowType = 'IFRAME';\n        }\n        else if (tokenParams.display === 'popup') {\n            flowType = 'POPUP';\n        }\n        else {\n            flowType = 'IMPLICIT';\n        }\n        // Execute the flow type\n        switch (flowType) {\n            case 'IFRAME':\n                var iframePromise = addPostMessageListener(sdk, options.timeout, tokenParams.state);\n                var iframeEl = loadFrame(requestUrl);\n                return iframePromise\n                    .then(function (res) {\n                    return handleOAuthResponse(sdk, tokenParams, res, urls);\n                })\n                    .finally(function () {\n                    if (document.body.contains(iframeEl)) {\n                        iframeEl.parentElement.removeChild(iframeEl);\n                    }\n                });\n            case 'POPUP':\n                var oauthPromise; // resolves with OAuth response\n                // Add listener on postMessage before window creation, so\n                // postMessage isn't triggered before we're listening\n                if (tokenParams.responseMode === 'okta_post_message') {\n                    if (!sdk.features.isPopupPostMessageSupported()) {\n                        throw new AuthSdkError('This browser doesn\\'t have full postMessage support');\n                    }\n                    oauthPromise = addPostMessageListener(sdk, options.timeout, tokenParams.state);\n                }\n                // Create the window\n                var windowOptions = {\n                    popupTitle: options.popupTitle\n                };\n                var windowEl = loadPopup(requestUrl, windowOptions);\n                // The popup may be closed without receiving an OAuth response. Setup a poller to monitor the window.\n                var popupPromise = new Promise(function (resolve, reject) {\n                    var closePoller = setInterval(function () {\n                        if (!windowEl || windowEl.closed) {\n                            clearInterval(closePoller);\n                            reject(new AuthSdkError('Unable to parse OAuth flow response'));\n                        }\n                    }, 100);\n                    // Proxy the OAuth promise results\n                    oauthPromise\n                        .then(function (res) {\n                        clearInterval(closePoller);\n                        resolve(res);\n                    })\n                        .catch(function (err) {\n                        clearInterval(closePoller);\n                        reject(err);\n                    });\n                });\n                return popupPromise\n                    .then(function (res) {\n                    return handleOAuthResponse(sdk, tokenParams, res, urls);\n                })\n                    .finally(function () {\n                    if (windowEl && !windowEl.closed) {\n                        windowEl.close();\n                    }\n                });\n            default:\n                throw new AuthSdkError('The full page redirect flow is not supported');\n        }\n    })\n        .catch(e => {\n        if (sdk.options.pkce) {\n            PKCE.clearMeta(sdk);\n        }\n        throw e;\n    });\n}\nfunction getWithoutPrompt(sdk, options) {\n    if (arguments.length > 2) {\n        return Promise.reject(new AuthSdkError('As of version 3.0, \"getWithoutPrompt\" takes only a single set of options'));\n    }\n    options = clone(options) || {};\n    Object.assign(options, {\n        prompt: 'none',\n        responseMode: 'okta_post_message',\n        display: null\n    });\n    return getToken(sdk, options);\n}\nfunction getWithPopup(sdk, options) {\n    if (arguments.length > 2) {\n        return Promise.reject(new AuthSdkError('As of version 3.0, \"getWithPopup\" takes only a single set of options'));\n    }\n    options = clone(options) || {};\n    Object.assign(options, {\n        display: 'popup',\n        responseMode: 'okta_post_message'\n    });\n    return getToken(sdk, options);\n}\nfunction prepareTokenParams(sdk, options) {\n    if (isLoginRedirect(sdk)) {\n        return Promise.reject(new AuthSdkError('The app should not attempt to call getToken on callback. ' +\n            'Authorize flow is already in process. Use parseFromUrl() to receive tokens.'));\n    }\n    // clone and prepare options\n    options = clone(options) || {};\n    // build params using defaults + options\n    var tokenParams = getDefaultTokenParams(sdk);\n    Object.assign(tokenParams, options);\n    if (tokenParams.pkce === false) {\n        return Promise.resolve(tokenParams);\n    }\n    // PKCE flow\n    if (!sdk.features.isPKCESupported()) {\n        var errorMessage = 'PKCE requires a modern browser with encryption support running in a secure context.';\n        if (!sdk.features.isHTTPS()) {\n            // eslint-disable-next-line max-len\n            errorMessage += '\\nThe current page is not being served with HTTPS protocol. PKCE requires secure HTTPS protocol.';\n        }\n        if (!sdk.features.hasTextEncoder()) {\n            // eslint-disable-next-line max-len\n            errorMessage += '\\n\"TextEncoder\" is not defined. To use PKCE, you may need to include a polyfill/shim for this browser.';\n        }\n        return Promise.reject(new AuthSdkError(errorMessage));\n    }\n    // set default code challenge method, if none provided\n    if (!tokenParams.codeChallengeMethod) {\n        tokenParams.codeChallengeMethod = PKCE.DEFAULT_CODE_CHALLENGE_METHOD;\n    }\n    // responseType is forced\n    tokenParams.responseType = 'code';\n    return getWellKnown(sdk, null)\n        .then(function (res) {\n        var methods = res['code_challenge_methods_supported'] || [];\n        if (methods.indexOf(tokenParams.codeChallengeMethod) === -1) {\n            throw new AuthSdkError('Invalid code_challenge_method');\n        }\n    })\n        .then(function () {\n        // PKCE authorization_code flow\n        var codeVerifier = PKCE.generateVerifier(tokenParams.codeVerifier);\n        // We will need these values after redirect when we call /token\n        var meta = {\n            codeVerifier: codeVerifier,\n            redirectUri: tokenParams.redirectUri\n        };\n        PKCE.saveMeta(sdk, meta);\n        return PKCE.computeChallenge(codeVerifier);\n    })\n        .then(function (codeChallenge) {\n        // Clone/copy the params. Set codeChallenge\n        var clonedParams = clone(tokenParams) || {};\n        Object.assign(clonedParams, tokenParams, {\n            codeChallenge: codeChallenge,\n        });\n        return clonedParams;\n    });\n}\nfunction addOAuthParamsToStorage(sdk, tokenParams, urls) {\n    const { responseType, state, nonce, scopes, clientId, ignoreSignature } = tokenParams;\n    const tokenParamsStr = JSON.stringify({\n        responseType,\n        state,\n        nonce,\n        scopes,\n        clientId,\n        urls,\n        ignoreSignature\n    });\n    if (browserStorage.browserHasSessionStorage()) {\n        browserStorage.getSessionStorage().setItem(REDIRECT_OAUTH_PARAMS_NAME, tokenParamsStr);\n    }\n    else {\n        cookies.set(REDIRECT_OAUTH_PARAMS_NAME, tokenParamsStr, null, sdk.options.cookies);\n    }\n}\nfunction getWithRedirect(sdk, options) {\n    if (arguments.length > 2) {\n        return Promise.reject(new AuthSdkError('As of version 3.0, \"getWithRedirect\" takes only a single set of options'));\n    }\n    options = clone(options) || {};\n    return prepareTokenParams(sdk, options)\n        .then(function (tokenParams) {\n        var urls = getOAuthUrls(sdk, options);\n        var requestUrl = urls.authorizeUrl + buildAuthorizeParams(tokenParams);\n        addOAuthParamsToStorage(sdk, tokenParams, urls);\n        // Set nonce cookie for servers to validate nonce in id_token\n        cookies.set(REDIRECT_NONCE_COOKIE_NAME, tokenParams.nonce, null, sdk.options.cookies);\n        // Set state cookie for servers to validate state\n        cookies.set(REDIRECT_STATE_COOKIE_NAME, tokenParams.state, null, sdk.options.cookies);\n        sdk.token.getWithRedirect._setLocation(requestUrl);\n    });\n}\nfunction renewToken(sdk, token) {\n    if (!isToken(token)) {\n        return Promise.reject(new AuthSdkError('Renew must be passed a token with ' +\n            'an array of scopes and an accessToken or idToken'));\n    }\n    var responseType;\n    if (sdk.options.pkce) {\n        responseType = 'code';\n    }\n    else if (isAccessToken(token)) {\n        responseType = 'token';\n    }\n    else {\n        responseType = 'id_token';\n    }\n    const { scopes, authorizeUrl, userinfoUrl, issuer } = token;\n    return getWithoutPrompt(sdk, {\n        responseType,\n        scopes,\n        authorizeUrl,\n        userinfoUrl,\n        issuer\n    })\n        .then(function (res) {\n        // Multiple tokens may have come back. Return only the token which was requested.\n        var tokens = res.tokens;\n        return isIDToken(token) ? tokens.idToken : tokens.accessToken;\n    });\n}\nfunction removeHash(sdk) {\n    var nativeHistory = sdk.token.parseFromUrl._getHistory();\n    var nativeDoc = sdk.token.parseFromUrl._getDocument();\n    var nativeLoc = sdk.token.parseFromUrl._getLocation();\n    if (nativeHistory && nativeHistory.replaceState) {\n        nativeHistory.replaceState(null, nativeDoc.title, nativeLoc.pathname + nativeLoc.search);\n    }\n    else {\n        nativeLoc.hash = '';\n    }\n}\nfunction removeSearch(sdk) {\n    var nativeHistory = sdk.token.parseFromUrl._getHistory();\n    var nativeDoc = sdk.token.parseFromUrl._getDocument();\n    var nativeLoc = sdk.token.parseFromUrl._getLocation();\n    if (nativeHistory && nativeHistory.replaceState) {\n        nativeHistory.replaceState(null, nativeDoc.title, nativeLoc.pathname + nativeLoc.hash);\n    }\n    else {\n        nativeLoc.search = '';\n    }\n}\nfunction getOAuthParamsStrFromStorage() {\n    let oauthParamsStr;\n    if (browserStorage.browserHasSessionStorage()) {\n        const storage = browserStorage.getSessionStorage();\n        oauthParamsStr = storage.getItem(REDIRECT_OAUTH_PARAMS_NAME);\n        storage.removeItem(REDIRECT_OAUTH_PARAMS_NAME);\n    }\n    else {\n        oauthParamsStr = cookies.get(REDIRECT_OAUTH_PARAMS_NAME);\n        cookies.delete(REDIRECT_OAUTH_PARAMS_NAME);\n    }\n    return oauthParamsStr;\n}\nfunction parseFromUrl(sdk, options) {\n    options = options || {};\n    if (isString(options)) {\n        options = { url: options };\n    }\n    else {\n        options = options;\n    }\n    // https://openid.net/specs/openid-connect-core-1_0.html#Authentication\n    var defaultResponseMode = sdk.options.pkce ? 'query' : 'fragment';\n    var url = options.url;\n    var responseMode = options.responseMode || sdk.options.responseMode || defaultResponseMode;\n    var nativeLoc = sdk.token.parseFromUrl._getLocation();\n    var paramStr;\n    if (responseMode === 'query') {\n        paramStr = url ? url.substring(url.indexOf('?')) : nativeLoc.search;\n    }\n    else {\n        paramStr = url ? url.substring(url.indexOf('#')) : nativeLoc.hash;\n    }\n    if (!paramStr) {\n        return Promise.reject(new AuthSdkError('Unable to parse a token from the url'));\n    }\n    const oauthParamsStr = getOAuthParamsStrFromStorage();\n    if (!oauthParamsStr) {\n        return Promise.reject(new AuthSdkError('Unable to retrieve OAuth redirect params from storage'));\n    }\n    try {\n        var oauthParams = JSON.parse(oauthParamsStr);\n        var urls = oauthParams.urls;\n        delete oauthParams.urls;\n    }\n    catch (e) {\n        return Promise.reject(new AuthSdkError('Unable to parse the ' +\n            REDIRECT_OAUTH_PARAMS_NAME + ' value from storage: ' + e.message));\n    }\n    return Promise.resolve(urlParamsToObject(paramStr))\n        .then(function (res) {\n        if (!url) {\n            // Clean hash or search from the url\n            responseMode === 'query' ? removeSearch(sdk) : removeHash(sdk);\n        }\n        return handleOAuthResponse(sdk, oauthParams, res, urls);\n    });\n}\nfunction getUserInfo(sdk, accessTokenObject, idTokenObject) {\n    return __awaiter(this, void 0, void 0, function* () {\n        // If token objects were not passed, attempt to read from the TokenManager\n        if (!accessTokenObject) {\n            accessTokenObject = yield sdk.tokenManager.get(ACCESS_TOKEN_STORAGE_KEY);\n        }\n        if (!idTokenObject) {\n            idTokenObject = yield sdk.tokenManager.get(ID_TOKEN_STORAGE_KEY);\n        }\n        if (!accessTokenObject ||\n            (!isToken(accessTokenObject) && !accessTokenObject.accessToken && !accessTokenObject.userinfoUrl)) {\n            return Promise.reject(new AuthSdkError('getUserInfo requires an access token object'));\n        }\n        if (!idTokenObject ||\n            (!isToken(idTokenObject) && !idTokenObject.idToken)) {\n            return Promise.reject(new AuthSdkError('getUserInfo requires an ID token object'));\n        }\n        return http.httpRequest(sdk, {\n            url: accessTokenObject.userinfoUrl,\n            method: 'GET',\n            accessToken: accessTokenObject.accessToken\n        })\n            .then(userInfo => {\n            // Only return the userinfo response if subjects match to mitigate token substitution attacks\n            if (userInfo.sub === idTokenObject.claims.sub) {\n                return userInfo;\n            }\n            return Promise.reject(new AuthSdkError('getUserInfo request was rejected due to token mismatch'));\n        })\n            .catch(function (err) {\n            if (err.xhr && (err.xhr.status === 401 || err.xhr.status === 403)) {\n                var authenticateHeader;\n                if (err.xhr.headers && isFunction(err.xhr.headers.get) && err.xhr.headers.get('WWW-Authenticate')) {\n                    authenticateHeader = err.xhr.headers.get('WWW-Authenticate');\n                }\n                else if (isFunction(err.xhr.getResponseHeader)) {\n                    authenticateHeader = err.xhr.getResponseHeader('WWW-Authenticate');\n                }\n                if (authenticateHeader) {\n                    var errorMatches = authenticateHeader.match(/error=\"(.*?)\"/) || [];\n                    var errorDescriptionMatches = authenticateHeader.match(/error_description=\"(.*?)\"/) || [];\n                    var error = errorMatches[1];\n                    var errorDescription = errorDescriptionMatches[1];\n                    if (error && errorDescription) {\n                        err = new OAuthError(error, errorDescription);\n                    }\n                }\n            }\n            throw err;\n        });\n    });\n}\nexport { revokeToken, getToken, getWithoutPrompt, getWithPopup, getWithRedirect, parseFromUrl, decodeToken, renewToken, getUserInfo, verifyToken, handleOAuthResponse, prepareTokenParams };\n","/*!\n * Copyright (c) 2015-present, Okta, Inc. and/or its affiliates. All rights reserved.\n * The Okta software accompanied by this notice is provided pursuant to the Apache License, Version 2.0 (the \"License.\")\n *\n * You may obtain a copy of the License at http://www.apache.org/licenses/LICENSE-2.0.\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS, WITHOUT\n * WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n *\n * See the License for the specific language governing permissions and limitations under the License.\n *\n */\nimport http from '../http';\nimport { find, omit, toQueryString, clone, isObject } from '../util';\nimport AuthSdkError from '../errors/AuthSdkError';\nimport { addStateToken } from './util';\nimport { getPollFn } from './poll';\nimport { postToTransaction } from './api';\nexport class AuthTransaction {\n    constructor(sdk, res = null) {\n        if (res) {\n            this.data = res;\n            Object.assign(this, flattenEmbedded(sdk, res, res, {}));\n            delete this.stateToken;\n            // RECOVERY_CHALLENGE has some responses without _links.\n            // Without _links, we emulate cancel to make it intuitive\n            // to return to the starting state. We may remove this\n            // when OKTA-75434 is resolved\n            if (res.status === 'RECOVERY_CHALLENGE' && !res._links) {\n                this.cancel = function () {\n                    return Promise.resolve(new AuthTransaction(sdk));\n                };\n            }\n        }\n    }\n}\nfunction link2fn(sdk, res, obj, link, ref) {\n    if (Array.isArray(link)) {\n        return function (name, opts) {\n            if (!name) {\n                throw new AuthSdkError('Must provide a link name');\n            }\n            var lk = find(link, { name: name });\n            if (!lk) {\n                throw new AuthSdkError('No link found for that name');\n            }\n            return link2fn(sdk, res, obj, lk, ref)(opts);\n        };\n    }\n    else if (link.hints &&\n        link.hints.allow &&\n        link.hints.allow.length === 1) {\n        var method = link.hints.allow[0];\n        switch (method) {\n            case 'GET':\n                return function () {\n                    return http.get(sdk, link.href);\n                };\n            case 'POST':\n                // eslint-disable-next-line max-statements,complexity\n                return function (opts) {\n                    if (ref && ref.isPolling) {\n                        ref.isPolling = false;\n                    }\n                    var data = addStateToken(res, opts);\n                    if (res.status === 'MFA_ENROLL' || res.status === 'FACTOR_ENROLL') {\n                        // Add factorType and provider\n                        Object.assign(data, {\n                            factorType: obj.factorType,\n                            provider: obj.provider\n                        });\n                    }\n                    var params = {};\n                    var autoPush = data.autoPush;\n                    if (autoPush !== undefined) {\n                        if (typeof autoPush === 'function') {\n                            try {\n                                params.autoPush = !!autoPush();\n                            }\n                            catch (e) {\n                                return Promise.reject(new AuthSdkError('AutoPush resulted in an error.'));\n                            }\n                        }\n                        else if (autoPush !== null) {\n                            params.autoPush = !!autoPush;\n                        }\n                        data = omit(data, 'autoPush');\n                    }\n                    var rememberDevice = data.rememberDevice;\n                    if (rememberDevice !== undefined) {\n                        if (typeof rememberDevice === 'function') {\n                            try {\n                                params.rememberDevice = !!rememberDevice();\n                            }\n                            catch (e) {\n                                return Promise.reject(new AuthSdkError('RememberDevice resulted in an error.'));\n                            }\n                        }\n                        else if (rememberDevice !== null) {\n                            params.rememberDevice = !!rememberDevice;\n                        }\n                        data = omit(data, 'rememberDevice');\n                    }\n                    else if (data.profile &&\n                        data.profile.updatePhone !== undefined) {\n                        if (data.profile.updatePhone) {\n                            params.updatePhone = true;\n                        }\n                        data.profile = omit(data.profile, 'updatePhone');\n                    }\n                    var href = link.href + toQueryString(params);\n                    return postToTransaction(sdk, href, data);\n                };\n        }\n    }\n}\nfunction links2fns(sdk, res, obj, ref) {\n    var fns = {};\n    for (var linkName in obj._links) {\n        if (!Object.prototype.hasOwnProperty.call(obj._links, linkName)) {\n            continue;\n        }\n        var link = obj._links[linkName];\n        if (linkName === 'next') {\n            linkName = link.name;\n        }\n        if (link.type) {\n            fns[linkName] = link;\n            continue;\n        }\n        switch (linkName) {\n            // poll is only found at the transaction\n            // level, so we don't need to pass the link\n            case 'poll':\n                fns.poll = getPollFn(sdk, res, ref);\n                break;\n            default:\n                var fn = link2fn(sdk, res, obj, link, ref);\n                if (fn) {\n                    fns[linkName] = fn;\n                }\n        }\n    }\n    return fns;\n}\n// eslint-disable-next-line complexity\nfunction flattenEmbedded(sdk, res, obj, ref) {\n    obj = obj || res;\n    obj = clone(obj);\n    if (Array.isArray(obj)) {\n        var objArr = [];\n        for (var o = 0, ol = obj.length; o < ol; o++) {\n            objArr.push(flattenEmbedded(sdk, res, obj[o], ref));\n        }\n        return objArr;\n    }\n    var embedded = obj._embedded || {};\n    for (var key in embedded) {\n        if (!Object.prototype.hasOwnProperty.call(embedded, key)) {\n            continue;\n        }\n        // Flatten any nested _embedded objects\n        if (isObject(embedded[key]) || Array.isArray(embedded[key])) {\n            embedded[key] = flattenEmbedded(sdk, res, embedded[key], ref);\n        }\n    }\n    // Convert any links on the embedded object\n    var fns = links2fns(sdk, res, obj, ref);\n    Object.assign(embedded, fns);\n    obj = omit(obj, '_embedded', '_links');\n    Object.assign(obj, embedded);\n    return obj;\n}\n","export class TransactionState {\n}\n","/*!\n * Copyright (c) 2015-present, Okta, Inc. and/or its affiliates. All rights reserved.\n * The Okta software accompanied by this notice is provided pursuant to the Apache License, Version 2.0 (the \"License.\")\n *\n * You may obtain a copy of the License at http://www.apache.org/licenses/LICENSE-2.0.\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS, WITHOUT\n * WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n *\n * See the License for the specific language governing permissions and limitations under the License.\n *\n */\n/* eslint-disable complexity, max-statements */\nimport http from '../http';\nimport AuthSdkError from '../errors/AuthSdkError';\nimport { STATE_TOKEN_KEY_NAME } from '../constants';\nimport { addStateToken } from './util';\nimport { AuthTransaction } from './AuthTransaction';\nfunction transactionStatus(sdk, args) {\n    args = addStateToken(sdk, args);\n    return http.post(sdk, sdk.getIssuerOrigin() + '/api/v1/authn', args);\n}\nfunction resumeTransaction(sdk, args) {\n    if (!args || !args.stateToken) {\n        var stateToken = sdk.tx.exists._get(STATE_TOKEN_KEY_NAME);\n        if (stateToken) {\n            args = {\n                stateToken: stateToken\n            };\n        }\n        else {\n            return Promise.reject(new AuthSdkError('No transaction to resume'));\n        }\n    }\n    return sdk.tx.status(args)\n        .then(function (res) {\n        return new AuthTransaction(sdk, res);\n    });\n}\nfunction introspect(sdk, args) {\n    if (!args || !args.stateToken) {\n        var stateToken = sdk.tx.exists._get(STATE_TOKEN_KEY_NAME);\n        if (stateToken) {\n            args = {\n                stateToken: stateToken\n            };\n        }\n        else {\n            return Promise.reject(new AuthSdkError('No transaction to evaluate'));\n        }\n    }\n    return transactionStep(sdk, args)\n        .then(function (res) {\n        return new AuthTransaction(sdk, res);\n    });\n}\nfunction transactionStep(sdk, args) {\n    args = addStateToken(sdk, args);\n    // v1 pipeline introspect API\n    return http.post(sdk, sdk.getIssuerOrigin() + '/api/v1/authn/introspect', args);\n}\nfunction transactionExists(sdk) {\n    // We have a cookie state token\n    return !!sdk.tx.exists._get(STATE_TOKEN_KEY_NAME);\n}\nfunction postToTransaction(sdk, url, args, options) {\n    return http.post(sdk, url, args, options)\n        .then(function (res) {\n        return new AuthTransaction(sdk, res);\n    });\n}\nexport { transactionStatus, resumeTransaction, transactionExists, postToTransaction, introspect, };\n","/*!\n * Copyright (c) 2015-present, Okta, Inc. and/or its affiliates. All rights reserved.\n * The Okta software accompanied by this notice is provided pursuant to the Apache License, Version 2.0 (the \"License.\")\n *\n * You may obtain a copy of the License at http://www.apache.org/licenses/LICENSE-2.0.\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS, WITHOUT\n * WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n *\n * See the License for the specific language governing permissions and limitations under the License.\n *\n */\nexport * from './api';\nexport * from './AuthTransaction';\nexport * from './poll';\nexport * from './TransactionState';\nexport * from './util';\n","/*!\n * Copyright (c) 2015-present, Okta, Inc. and/or its affiliates. All rights reserved.\n * The Okta software accompanied by this notice is provided pursuant to the Apache License, Version 2.0 (the \"License.\")\n *\n * You may obtain a copy of the License at http://www.apache.org/licenses/LICENSE-2.0.\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS, WITHOUT\n * WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n *\n * See the License for the specific language governing permissions and limitations under the License.\n *\n */\nimport http from '../http';\nimport { isNumber, isObject, getLink, toQueryString, delay as delayFn } from '../util';\nimport { DEFAULT_POLLING_DELAY } from '../constants';\nimport AuthSdkError from '../errors/AuthSdkError';\nimport AuthPollStopError from '../errors/AuthPollStopError';\nimport { AuthTransaction } from './AuthTransaction';\nimport { getStateToken } from './util';\nexport function getPollFn(sdk, res, ref) {\n    return function (options) {\n        var delay;\n        var rememberDevice;\n        var autoPush;\n        var transactionCallBack;\n        if (isNumber(options)) {\n            delay = options;\n        }\n        else if (isObject(options)) {\n            options = options;\n            delay = options.delay;\n            rememberDevice = options.rememberDevice;\n            autoPush = options.autoPush;\n            transactionCallBack = options.transactionCallBack;\n        }\n        if (!delay && delay !== 0) {\n            delay = DEFAULT_POLLING_DELAY;\n        }\n        // Get the poll function\n        var pollLink = getLink(res, 'next', 'poll');\n        // eslint-disable-next-line complexity\n        function pollFn() {\n            var opts = {};\n            if (typeof autoPush === 'function') {\n                try {\n                    opts.autoPush = !!autoPush();\n                }\n                catch (e) {\n                    return Promise.reject(new AuthSdkError('AutoPush resulted in an error.'));\n                }\n            }\n            else if (autoPush !== undefined && autoPush !== null) {\n                opts.autoPush = !!autoPush;\n            }\n            if (typeof rememberDevice === 'function') {\n                try {\n                    opts.rememberDevice = !!rememberDevice();\n                }\n                catch (e) {\n                    return Promise.reject(new AuthSdkError('RememberDevice resulted in an error.'));\n                }\n            }\n            else if (rememberDevice !== undefined && rememberDevice !== null) {\n                opts.rememberDevice = !!rememberDevice;\n            }\n            var href = pollLink.href + toQueryString(opts);\n            return http.post(sdk, href, getStateToken(res), {\n                saveAuthnState: false\n            });\n        }\n        ref.isPolling = true;\n        var retryCount = 0;\n        var recursivePoll = function () {\n            // If the poll was manually stopped during the delay\n            if (!ref.isPolling) {\n                return Promise.reject(new AuthPollStopError());\n            }\n            return pollFn()\n                .then(function (pollRes) {\n                // Reset our retry counter on success\n                retryCount = 0;\n                // If we're still waiting\n                if (pollRes.factorResult && pollRes.factorResult === 'WAITING') {\n                    // If the poll was manually stopped while the pollFn was called\n                    if (!ref.isPolling) {\n                        throw new AuthPollStopError();\n                    }\n                    if (typeof transactionCallBack === 'function') {\n                        transactionCallBack(pollRes);\n                    }\n                    // Continue poll\n                    return delayFn(delay).then(recursivePoll);\n                }\n                else {\n                    // Any non-waiting result, even if polling was stopped\n                    // during a request, will return\n                    ref.isPolling = false;\n                    return new AuthTransaction(sdk, pollRes);\n                }\n            })\n                .catch(function (err) {\n                // Exponential backoff, up to 16 seconds\n                if (err.xhr &&\n                    (err.xhr.status === 0 || err.xhr.status === 429) &&\n                    retryCount <= 4) {\n                    var delayLength = Math.pow(2, retryCount) * 1000;\n                    retryCount++;\n                    return delayFn(delayLength)\n                        .then(recursivePoll);\n                }\n                throw err;\n            });\n        };\n        return recursivePoll()\n            .catch(function (err) {\n            ref.isPolling = false;\n            throw err;\n        });\n    };\n}\n","/*!\n * Copyright (c) 2015-present, Okta, Inc. and/or its affiliates. All rights reserved.\n * The Okta software accompanied by this notice is provided pursuant to the Apache License, Version 2.0 (the \"License.\")\n *\n * You may obtain a copy of the License at http://www.apache.org/licenses/LICENSE-2.0.\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS, WITHOUT\n * WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n *\n * See the License for the specific language governing permissions and limitations under the License.\n *\n */\nexport function addStateToken(res, options) {\n    var builtArgs = {};\n    Object.assign(builtArgs, options);\n    // Add the stateToken if one isn't passed and we have one\n    if (!builtArgs.stateToken && res.stateToken) {\n        builtArgs.stateToken = res.stateToken;\n    }\n    return builtArgs;\n}\nexport function getStateToken(res) {\n    return addStateToken(res);\n}\n","/*!\n * Copyright (c) 2015-present, Okta, Inc. and/or its affiliates. All rights reserved.\n * The Okta software accompanied by this notice is provided pursuant to the Apache License, Version 2.0 (the \"License.\")\n *\n * You may obtain a copy of the License at http://www.apache.org/licenses/LICENSE-2.0.\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS, WITHOUT\n * WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n *\n * See the License for the specific language governing permissions and limitations under the License.\n */\n","/*!\n * Copyright (c) 2015-present, Okta, Inc. and/or its affiliates. All rights reserved.\n * The Okta software accompanied by this notice is provided pursuant to the Apache License, Version 2.0 (the \"License.\")\n *\n * You may obtain a copy of the License at http://www.apache.org/licenses/LICENSE-2.0.\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS, WITHOUT\n * WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n *\n * See the License for the specific language governing permissions and limitations under the License.\n */\n","/* eslint-disable camelcase */\n/*!\n * Copyright (c) 2015-present, Okta, Inc. and/or its affiliates. All rights reserved.\n * The Okta software accompanied by this notice is provided pursuant to the Apache License, Version 2.0 (the \"License.\")\n *\n * You may obtain a copy of the License at http://www.apache.org/licenses/LICENSE-2.0.\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS, WITHOUT\n * WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n *\n * See the License for the specific language governing permissions and limitations under the License.\n */\n","/*!\n * Copyright (c) 2015-present, Okta, Inc. and/or its affiliates. All rights reserved.\n * The Okta software accompanied by this notice is provided pursuant to the Apache License, Version 2.0 (the \"License.\")\n *\n * You may obtain a copy of the License at http://www.apache.org/licenses/LICENSE-2.0.\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS, WITHOUT\n * WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n *\n * See the License for the specific language governing permissions and limitations under the License.\n */\n","/*!\n * Copyright (c) 2015-present, Okta, Inc. and/or its affiliates. All rights reserved.\n * The Okta software accompanied by this notice is provided pursuant to the Apache License, Version 2.0 (the \"License.\")\n *\n * You may obtain a copy of the License at http://www.apache.org/licenses/LICENSE-2.0.\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS, WITHOUT\n * WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n *\n * See the License for the specific language governing permissions and limitations under the License.\n */\n// type StorageBuilder = (storage: Storage | SimpleStorage, name: string) => StorageProvider;\n","/*!\n * Copyright (c) 2015-present, Okta, Inc. and/or its affiliates. All rights reserved.\n * The Okta software accompanied by this notice is provided pursuant to the Apache License, Version 2.0 (the \"License.\")\n *\n * You may obtain a copy of the License at http://www.apache.org/licenses/LICENSE-2.0.\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS, WITHOUT\n * WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n *\n * See the License for the specific language governing permissions and limitations under the License.\n */\nexport function isToken(obj) {\n    if (obj &&\n        (obj.accessToken || obj.idToken) &&\n        Array.isArray(obj.scopes)) {\n        return true;\n    }\n    return false;\n}\nexport function isAccessToken(obj) {\n    return obj && obj.accessToken;\n}\nexport function isIDToken(obj) {\n    return obj && obj.idToken;\n}\n","/*!\n * Copyright (c) 2015-present, Okta, Inc. and/or its affiliates. All rights reserved.\n * The Okta software accompanied by this notice is provided pursuant to the Apache License, Version 2.0 (the \"License.\")\n *\n * You may obtain a copy of the License at http://www.apache.org/licenses/LICENSE-2.0.\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS, WITHOUT\n * WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n *\n * See the License for the specific language governing permissions and limitations under the License.\n */\n","/*!\n * Copyright (c) 2015-present, Okta, Inc. and/or its affiliates. All rights reserved.\n * The Okta software accompanied by this notice is provided pursuant to the Apache License, Version 2.0 (the \"License.\")\n *\n * You may obtain a copy of the License at http://www.apache.org/licenses/LICENSE-2.0.\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS, WITHOUT\n * WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n *\n * See the License for the specific language governing permissions and limitations under the License.\n */\n","/*!\n * Copyright (c) 2015-present, Okta, Inc. and/or its affiliates. All rights reserved.\n * The Okta software accompanied by this notice is provided pursuant to the Apache License, Version 2.0 (the \"License.\")\n *\n * You may obtain a copy of the License at http://www.apache.org/licenses/LICENSE-2.0.\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS, WITHOUT\n * WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n *\n * See the License for the specific language governing permissions and limitations under the License.\n */\nexport * from './api';\nexport * from './Cookies';\nexport * from './http';\nexport * from './JWT';\nexport * from './OAuth';\nexport * from './OktaAuthOptions';\nexport * from './Storage';\nexport * from './Token';\nexport * from './UserClaims';\n","/*!\n * Copyright (c) 2015-present, Okta, Inc. and/or its affiliates. All rights reserved.\n * The Okta software accompanied by this notice is provided pursuant to the Apache License, Version 2.0 (the \"License.\")\n *\n * You may obtain a copy of the License at http://www.apache.org/licenses/LICENSE-2.0.\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS, WITHOUT\n * WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n *\n * See the License for the specific language governing permissions and limitations under the License.\n */\n/* global window, document, btoa, atob */\n// converts a string to base64 (url/filename safe variant)\nexport function stringToBase64Url(str) {\n    var b64 = btoa(str);\n    return base64ToBase64Url(b64);\n}\n// converts a standard base64-encoded string to a \"url/filename safe\" variant\nexport function base64ToBase64Url(b64) {\n    return b64.replace(/\\+/g, '-').replace(/\\//g, '_').replace(/=+$/, '');\n}\n// converts a \"url/filename safe\" base64 string to a \"standard\" base64 string\nexport function base64UrlToBase64(b64u) {\n    return b64u.replace(/-/g, '+').replace(/_/g, '/');\n}\nexport function base64UrlToString(b64u) {\n    var b64 = base64UrlToBase64(b64u);\n    switch (b64.length % 4) {\n        case 0:\n            break;\n        case 2:\n            b64 += '==';\n            break;\n        case 3:\n            b64 += '=';\n            break;\n        default:\n            throw 'Not a valid Base64Url';\n    }\n    var utf8 = atob(b64);\n    try {\n        return decodeURIComponent(escape(utf8));\n    }\n    catch (e) {\n        return utf8;\n    }\n}\nexport function stringToBuffer(str) {\n    var buffer = new Uint8Array(str.length);\n    for (var i = 0; i < str.length; i++) {\n        buffer[i] = str.charCodeAt(i);\n    }\n    return buffer;\n}\nexport function base64UrlDecode(str) {\n    return atob(base64UrlToBase64(str));\n}\nexport function bind(fn, ctx) {\n    var additionalArgs = Array.prototype.slice.call(arguments, 2);\n    return function () {\n        var args = Array.prototype.slice.call(arguments);\n        args = additionalArgs.concat(args);\n        return fn.apply(ctx, args);\n    };\n}\nexport function isAbsoluteUrl(url) {\n    return /^(?:[a-z]+:)?\\/\\//i.test(url);\n}\nexport function isString(obj) {\n    return Object.prototype.toString.call(obj) === '[object String]';\n}\nexport function isObject(obj) {\n    return Object.prototype.toString.call(obj) === '[object Object]';\n}\nexport function isNumber(obj) {\n    return Object.prototype.toString.call(obj) === '[object Number]';\n}\nexport function isoToUTCString(str) {\n    var parts = str.match(/\\d+/g), isoTime = Date.UTC(parts[0], parts[1] - 1, parts[2], parts[3], parts[4], parts[5]), isoDate = new Date(isoTime);\n    return isoDate.toUTCString();\n}\nexport function toQueryString(obj) {\n    var str = [];\n    if (obj !== null) {\n        for (var key in obj) {\n            if (Object.prototype.hasOwnProperty.call(obj, key) &&\n                obj[key] !== undefined &&\n                obj[key] !== null) {\n                str.push(key + '=' + encodeURIComponent(obj[key]));\n            }\n        }\n    }\n    if (str.length) {\n        return '?' + str.join('&');\n    }\n    else {\n        return '';\n    }\n}\nexport function genRandomString(length) {\n    var randomCharset = 'abcdefghijklnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789';\n    var random = '';\n    for (var c = 0, cl = randomCharset.length; c < length; ++c) {\n        random += randomCharset[Math.floor(Math.random() * cl)];\n    }\n    return random;\n}\n// TODO: replace all references with `Object.assign` then remove this function\nexport function extend() {\n    // First object will be modified!\n    var obj1 = arguments[0];\n    // Properties from other objects will be copied over\n    var objArray = [].slice.call(arguments, 1);\n    objArray.forEach(function (obj) {\n        for (var prop in obj) {\n            // copy over all properties with defined values\n            if (Object.prototype.hasOwnProperty.call(obj, prop) && obj[prop] !== undefined) {\n                obj1[prop] = obj[prop];\n            }\n        }\n    });\n    return obj1; // return the modified object\n}\nexport function removeNils(obj) {\n    var cleaned = {};\n    for (var prop in obj) {\n        if (Object.prototype.hasOwnProperty.call(obj, prop)) {\n            var value = obj[prop];\n            if (value !== null && value !== undefined) {\n                cleaned[prop] = value;\n            }\n        }\n    }\n    return cleaned;\n}\nexport function clone(obj) {\n    if (obj) {\n        var str = JSON.stringify(obj);\n        if (str) {\n            return JSON.parse(str);\n        }\n    }\n    return obj;\n}\n// Analogous to _.omit\nexport function omit(obj, ...props) {\n    // var props = Array.prototype.slice.call(arguments, 1);\n    var newobj = {};\n    for (var p in obj) {\n        if (Object.prototype.hasOwnProperty.call(obj, p) && props.indexOf(p) == -1) {\n            newobj[p] = obj[p];\n        }\n    }\n    return clone(newobj);\n}\nexport function find(collection, searchParams) {\n    var c = collection.length;\n    while (c--) {\n        var item = collection[c];\n        var found = true;\n        for (var prop in searchParams) {\n            if (!Object.prototype.hasOwnProperty.call(searchParams, prop)) {\n                continue;\n            }\n            if (item[prop] !== searchParams[prop]) {\n                found = false;\n                break;\n            }\n        }\n        if (found) {\n            return item;\n        }\n    }\n}\nexport function getLink(obj, linkName, altName) {\n    if (!obj || !obj._links) {\n        return;\n    }\n    var link = clone(obj._links[linkName]);\n    // If a link has a name and we have an altName, return if they match\n    if (link && link.name && altName) {\n        if (link.name === altName) {\n            return link;\n        }\n    }\n    else {\n        return link;\n    }\n}\nexport function getNativeConsole() {\n    if (typeof window !== 'undefined') {\n        return window.console;\n    }\n    else if (typeof console !== 'undefined') {\n        return console;\n    }\n    else {\n        return undefined;\n    }\n}\nexport function getConsole() {\n    var nativeConsole = getNativeConsole();\n    if (nativeConsole && nativeConsole.log) {\n        return nativeConsole;\n    }\n    return {\n        log: function () { }\n    };\n}\nexport function warn(text) {\n    /* eslint-disable no-console */\n    getConsole().log('[okta-auth-sdk] WARN: ' + text);\n    /* eslint-enable */\n}\nexport function deprecate(text) {\n    /* eslint-disable no-console */\n    getConsole().log('[okta-auth-sdk] DEPRECATION: ' + text);\n    /* eslint-enable */\n}\nexport function deprecateWrap(text, fn) {\n    return function () {\n        deprecate(text);\n        return fn.apply(null, arguments);\n    };\n}\nexport function removeTrailingSlash(path) {\n    if (!path) {\n        return;\n    }\n    // Remove any whitespace before or after string\n    var trimmed = path.replace(/^\\s+|\\s+$/gm, '');\n    // Remove trailing slash(es)\n    trimmed = trimmed.replace(/\\/+$/, '');\n    return trimmed;\n}\nexport function isIE11OrLess() {\n    return !!document.documentMode && document.documentMode <= 11;\n}\nexport function isFunction(fn) {\n    return !!fn && {}.toString.call(fn) === '[object Function]';\n}\nexport function delay(ms) {\n    return new Promise(function (resolve) {\n        setTimeout(resolve, ms);\n    });\n}\nexport function isPromise(obj) {\n    return obj && obj.finally && (typeof obj.finally === 'function');\n}\n","function _assertThisInitialized(self) {\n  if (self === void 0) {\n    throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n  }\n\n  return self;\n}\n\nmodule.exports = _assertThisInitialized;","function _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}\n\nmodule.exports = _classCallCheck;","var setPrototypeOf = require(\"./setPrototypeOf\");\n\nvar isNativeReflectConstruct = require(\"./isNativeReflectConstruct\");\n\nfunction _construct(Parent, args, Class) {\n  if (isNativeReflectConstruct()) {\n    module.exports = _construct = Reflect.construct;\n  } else {\n    module.exports = _construct = function _construct(Parent, args, Class) {\n      var a = [null];\n      a.push.apply(a, args);\n      var Constructor = Function.bind.apply(Parent, a);\n      var instance = new Constructor();\n      if (Class) setPrototypeOf(instance, Class.prototype);\n      return instance;\n    };\n  }\n\n  return _construct.apply(null, arguments);\n}\n\nmodule.exports = _construct;","function _defineProperties(target, props) {\n  for (var i = 0; i < props.length; i++) {\n    var descriptor = props[i];\n    descriptor.enumerable = descriptor.enumerable || false;\n    descriptor.configurable = true;\n    if (\"value\" in descriptor) descriptor.writable = true;\n    Object.defineProperty(target, descriptor.key, descriptor);\n  }\n}\n\nfunction _createClass(Constructor, protoProps, staticProps) {\n  if (protoProps) _defineProperties(Constructor.prototype, protoProps);\n  if (staticProps) _defineProperties(Constructor, staticProps);\n  return Constructor;\n}\n\nmodule.exports = _createClass;","function _getPrototypeOf(o) {\n  module.exports = _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) {\n    return o.__proto__ || Object.getPrototypeOf(o);\n  };\n  return _getPrototypeOf(o);\n}\n\nmodule.exports = _getPrototypeOf;","var setPrototypeOf = require(\"./setPrototypeOf\");\n\nfunction _inherits(subClass, superClass) {\n  if (typeof superClass !== \"function\" && superClass !== null) {\n    throw new TypeError(\"Super expression must either be null or a function\");\n  }\n\n  subClass.prototype = Object.create(superClass && superClass.prototype, {\n    constructor: {\n      value: subClass,\n      writable: true,\n      configurable: true\n    }\n  });\n  if (superClass) setPrototypeOf(subClass, superClass);\n}\n\nmodule.exports = _inherits;","function _isNativeFunction(fn) {\n  return Function.toString.call(fn).indexOf(\"[native code]\") !== -1;\n}\n\nmodule.exports = _isNativeFunction;","function _isNativeReflectConstruct() {\n  if (typeof Reflect === \"undefined\" || !Reflect.construct) return false;\n  if (Reflect.construct.sham) return false;\n  if (typeof Proxy === \"function\") return true;\n\n  try {\n    Date.prototype.toString.call(Reflect.construct(Date, [], function () {}));\n    return true;\n  } catch (e) {\n    return false;\n  }\n}\n\nmodule.exports = _isNativeReflectConstruct;","var _typeof = require(\"../helpers/typeof\");\n\nvar assertThisInitialized = require(\"./assertThisInitialized\");\n\nfunction _possibleConstructorReturn(self, call) {\n  if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) {\n    return call;\n  }\n\n  return assertThisInitialized(self);\n}\n\nmodule.exports = _possibleConstructorReturn;","function _setPrototypeOf(o, p) {\n  module.exports = _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) {\n    o.__proto__ = p;\n    return o;\n  };\n\n  return _setPrototypeOf(o, p);\n}\n\nmodule.exports = _setPrototypeOf;","function _typeof(obj) {\n  \"@babel/helpers - typeof\";\n\n  if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") {\n    module.exports = _typeof = function _typeof(obj) {\n      return typeof obj;\n    };\n  } else {\n    module.exports = _typeof = function _typeof(obj) {\n      return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;\n    };\n  }\n\n  return _typeof(obj);\n}\n\nmodule.exports = _typeof;","var getPrototypeOf = require(\"./getPrototypeOf\");\n\nvar setPrototypeOf = require(\"./setPrototypeOf\");\n\nvar isNativeFunction = require(\"./isNativeFunction\");\n\nvar construct = require(\"./construct\");\n\nfunction _wrapNativeSuper(Class) {\n  var _cache = typeof Map === \"function\" ? new Map() : undefined;\n\n  module.exports = _wrapNativeSuper = function _wrapNativeSuper(Class) {\n    if (Class === null || !isNativeFunction(Class)) return Class;\n\n    if (typeof Class !== \"function\") {\n      throw new TypeError(\"Super expression must either be null or a function\");\n    }\n\n    if (typeof _cache !== \"undefined\") {\n      if (_cache.has(Class)) return _cache.get(Class);\n\n      _cache.set(Class, Wrapper);\n    }\n\n    function Wrapper() {\n      return construct(Class, arguments, getPrototypeOf(this).constructor);\n    }\n\n    Wrapper.prototype = Object.create(Class.prototype, {\n      constructor: {\n        value: Wrapper,\n        enumerable: false,\n        writable: true,\n        configurable: true\n      }\n    });\n    return setPrototypeOf(Wrapper, Class);\n  };\n\n  return _wrapNativeSuper(Class);\n}\n\nmodule.exports = _wrapNativeSuper;","module.exports = require(\"regenerator-runtime\");\n","var __self__ = (function (root) {\nfunction F() {\nthis.fetch = false;\nthis.DOMException = root.DOMException\n}\nF.prototype = root;\nreturn new F();\n})(typeof self !== 'undefined' ? self : this);\n(function(self) {\n\nvar irrelevant = (function (exports) {\n  var support = {\n    searchParams: 'URLSearchParams' in self,\n    iterable: 'Symbol' in self && 'iterator' in Symbol,\n    blob:\n      'FileReader' in self &&\n      'Blob' in self &&\n      (function() {\n        try {\n          new Blob();\n          return true\n        } catch (e) {\n          return false\n        }\n      })(),\n    formData: 'FormData' in self,\n    arrayBuffer: 'ArrayBuffer' in self\n  };\n\n  function isDataView(obj) {\n    return obj && DataView.prototype.isPrototypeOf(obj)\n  }\n\n  if (support.arrayBuffer) {\n    var viewClasses = [\n      '[object Int8Array]',\n      '[object Uint8Array]',\n      '[object Uint8ClampedArray]',\n      '[object Int16Array]',\n      '[object Uint16Array]',\n      '[object Int32Array]',\n      '[object Uint32Array]',\n      '[object Float32Array]',\n      '[object Float64Array]'\n    ];\n\n    var isArrayBufferView =\n      ArrayBuffer.isView ||\n      function(obj) {\n        return obj && viewClasses.indexOf(Object.prototype.toString.call(obj)) > -1\n      };\n  }\n\n  function normalizeName(name) {\n    if (typeof name !== 'string') {\n      name = String(name);\n    }\n    if (/[^a-z0-9\\-#$%&'*+.^_`|~]/i.test(name)) {\n      throw new TypeError('Invalid character in header field name')\n    }\n    return name.toLowerCase()\n  }\n\n  function normalizeValue(value) {\n    if (typeof value !== 'string') {\n      value = String(value);\n    }\n    return value\n  }\n\n  // Build a destructive iterator for the value list\n  function iteratorFor(items) {\n    var iterator = {\n      next: function() {\n        var value = items.shift();\n        return {done: value === undefined, value: value}\n      }\n    };\n\n    if (support.iterable) {\n      iterator[Symbol.iterator] = function() {\n        return iterator\n      };\n    }\n\n    return iterator\n  }\n\n  function Headers(headers) {\n    this.map = {};\n\n    if (headers instanceof Headers) {\n      headers.forEach(function(value, name) {\n        this.append(name, value);\n      }, this);\n    } else if (Array.isArray(headers)) {\n      headers.forEach(function(header) {\n        this.append(header[0], header[1]);\n      }, this);\n    } else if (headers) {\n      Object.getOwnPropertyNames(headers).forEach(function(name) {\n        this.append(name, headers[name]);\n      }, this);\n    }\n  }\n\n  Headers.prototype.append = function(name, value) {\n    name = normalizeName(name);\n    value = normalizeValue(value);\n    var oldValue = this.map[name];\n    this.map[name] = oldValue ? oldValue + ', ' + value : value;\n  };\n\n  Headers.prototype['delete'] = function(name) {\n    delete this.map[normalizeName(name)];\n  };\n\n  Headers.prototype.get = function(name) {\n    name = normalizeName(name);\n    return this.has(name) ? this.map[name] : null\n  };\n\n  Headers.prototype.has = function(name) {\n    return this.map.hasOwnProperty(normalizeName(name))\n  };\n\n  Headers.prototype.set = function(name, value) {\n    this.map[normalizeName(name)] = normalizeValue(value);\n  };\n\n  Headers.prototype.forEach = function(callback, thisArg) {\n    for (var name in this.map) {\n      if (this.map.hasOwnProperty(name)) {\n        callback.call(thisArg, this.map[name], name, this);\n      }\n    }\n  };\n\n  Headers.prototype.keys = function() {\n    var items = [];\n    this.forEach(function(value, name) {\n      items.push(name);\n    });\n    return iteratorFor(items)\n  };\n\n  Headers.prototype.values = function() {\n    var items = [];\n    this.forEach(function(value) {\n      items.push(value);\n    });\n    return iteratorFor(items)\n  };\n\n  Headers.prototype.entries = function() {\n    var items = [];\n    this.forEach(function(value, name) {\n      items.push([name, value]);\n    });\n    return iteratorFor(items)\n  };\n\n  if (support.iterable) {\n    Headers.prototype[Symbol.iterator] = Headers.prototype.entries;\n  }\n\n  function consumed(body) {\n    if (body.bodyUsed) {\n      return Promise.reject(new TypeError('Already read'))\n    }\n    body.bodyUsed = true;\n  }\n\n  function fileReaderReady(reader) {\n    return new Promise(function(resolve, reject) {\n      reader.onload = function() {\n        resolve(reader.result);\n      };\n      reader.onerror = function() {\n        reject(reader.error);\n      };\n    })\n  }\n\n  function readBlobAsArrayBuffer(blob) {\n    var reader = new FileReader();\n    var promise = fileReaderReady(reader);\n    reader.readAsArrayBuffer(blob);\n    return promise\n  }\n\n  function readBlobAsText(blob) {\n    var reader = new FileReader();\n    var promise = fileReaderReady(reader);\n    reader.readAsText(blob);\n    return promise\n  }\n\n  function readArrayBufferAsText(buf) {\n    var view = new Uint8Array(buf);\n    var chars = new Array(view.length);\n\n    for (var i = 0; i < view.length; i++) {\n      chars[i] = String.fromCharCode(view[i]);\n    }\n    return chars.join('')\n  }\n\n  function bufferClone(buf) {\n    if (buf.slice) {\n      return buf.slice(0)\n    } else {\n      var view = new Uint8Array(buf.byteLength);\n      view.set(new Uint8Array(buf));\n      return view.buffer\n    }\n  }\n\n  function Body() {\n    this.bodyUsed = false;\n\n    this._initBody = function(body) {\n      this._bodyInit = body;\n      if (!body) {\n        this._bodyText = '';\n      } else if (typeof body === 'string') {\n        this._bodyText = body;\n      } else if (support.blob && Blob.prototype.isPrototypeOf(body)) {\n        this._bodyBlob = body;\n      } else if (support.formData && FormData.prototype.isPrototypeOf(body)) {\n        this._bodyFormData = body;\n      } else if (support.searchParams && URLSearchParams.prototype.isPrototypeOf(body)) {\n        this._bodyText = body.toString();\n      } else if (support.arrayBuffer && support.blob && isDataView(body)) {\n        this._bodyArrayBuffer = bufferClone(body.buffer);\n        // IE 10-11 can't handle a DataView body.\n        this._bodyInit = new Blob([this._bodyArrayBuffer]);\n      } else if (support.arrayBuffer && (ArrayBuffer.prototype.isPrototypeOf(body) || isArrayBufferView(body))) {\n        this._bodyArrayBuffer = bufferClone(body);\n      } else {\n        this._bodyText = body = Object.prototype.toString.call(body);\n      }\n\n      if (!this.headers.get('content-type')) {\n        if (typeof body === 'string') {\n          this.headers.set('content-type', 'text/plain;charset=UTF-8');\n        } else if (this._bodyBlob && this._bodyBlob.type) {\n          this.headers.set('content-type', this._bodyBlob.type);\n        } else if (support.searchParams && URLSearchParams.prototype.isPrototypeOf(body)) {\n          this.headers.set('content-type', 'application/x-www-form-urlencoded;charset=UTF-8');\n        }\n      }\n    };\n\n    if (support.blob) {\n      this.blob = function() {\n        var rejected = consumed(this);\n        if (rejected) {\n          return rejected\n        }\n\n        if (this._bodyBlob) {\n          return Promise.resolve(this._bodyBlob)\n        } else if (this._bodyArrayBuffer) {\n          return Promise.resolve(new Blob([this._bodyArrayBuffer]))\n        } else if (this._bodyFormData) {\n          throw new Error('could not read FormData body as blob')\n        } else {\n          return Promise.resolve(new Blob([this._bodyText]))\n        }\n      };\n\n      this.arrayBuffer = function() {\n        if (this._bodyArrayBuffer) {\n          return consumed(this) || Promise.resolve(this._bodyArrayBuffer)\n        } else {\n          return this.blob().then(readBlobAsArrayBuffer)\n        }\n      };\n    }\n\n    this.text = function() {\n      var rejected = consumed(this);\n      if (rejected) {\n        return rejected\n      }\n\n      if (this._bodyBlob) {\n        return readBlobAsText(this._bodyBlob)\n      } else if (this._bodyArrayBuffer) {\n        return Promise.resolve(readArrayBufferAsText(this._bodyArrayBuffer))\n      } else if (this._bodyFormData) {\n        throw new Error('could not read FormData body as text')\n      } else {\n        return Promise.resolve(this._bodyText)\n      }\n    };\n\n    if (support.formData) {\n      this.formData = function() {\n        return this.text().then(decode)\n      };\n    }\n\n    this.json = function() {\n      return this.text().then(JSON.parse)\n    };\n\n    return this\n  }\n\n  // HTTP methods whose capitalization should be normalized\n  var methods = ['DELETE', 'GET', 'HEAD', 'OPTIONS', 'POST', 'PUT'];\n\n  function normalizeMethod(method) {\n    var upcased = method.toUpperCase();\n    return methods.indexOf(upcased) > -1 ? upcased : method\n  }\n\n  function Request(input, options) {\n    options = options || {};\n    var body = options.body;\n\n    if (input instanceof Request) {\n      if (input.bodyUsed) {\n        throw new TypeError('Already read')\n      }\n      this.url = input.url;\n      this.credentials = input.credentials;\n      if (!options.headers) {\n        this.headers = new Headers(input.headers);\n      }\n      this.method = input.method;\n      this.mode = input.mode;\n      this.signal = input.signal;\n      if (!body && input._bodyInit != null) {\n        body = input._bodyInit;\n        input.bodyUsed = true;\n      }\n    } else {\n      this.url = String(input);\n    }\n\n    this.credentials = options.credentials || this.credentials || 'same-origin';\n    if (options.headers || !this.headers) {\n      this.headers = new Headers(options.headers);\n    }\n    this.method = normalizeMethod(options.method || this.method || 'GET');\n    this.mode = options.mode || this.mode || null;\n    this.signal = options.signal || this.signal;\n    this.referrer = null;\n\n    if ((this.method === 'GET' || this.method === 'HEAD') && body) {\n      throw new TypeError('Body not allowed for GET or HEAD requests')\n    }\n    this._initBody(body);\n  }\n\n  Request.prototype.clone = function() {\n    return new Request(this, {body: this._bodyInit})\n  };\n\n  function decode(body) {\n    var form = new FormData();\n    body\n      .trim()\n      .split('&')\n      .forEach(function(bytes) {\n        if (bytes) {\n          var split = bytes.split('=');\n          var name = split.shift().replace(/\\+/g, ' ');\n          var value = split.join('=').replace(/\\+/g, ' ');\n          form.append(decodeURIComponent(name), decodeURIComponent(value));\n        }\n      });\n    return form\n  }\n\n  function parseHeaders(rawHeaders) {\n    var headers = new Headers();\n    // Replace instances of \\r\\n and \\n followed by at least one space or horizontal tab with a space\n    // https://tools.ietf.org/html/rfc7230#section-3.2\n    var preProcessedHeaders = rawHeaders.replace(/\\r?\\n[\\t ]+/g, ' ');\n    preProcessedHeaders.split(/\\r?\\n/).forEach(function(line) {\n      var parts = line.split(':');\n      var key = parts.shift().trim();\n      if (key) {\n        var value = parts.join(':').trim();\n        headers.append(key, value);\n      }\n    });\n    return headers\n  }\n\n  Body.call(Request.prototype);\n\n  function Response(bodyInit, options) {\n    if (!options) {\n      options = {};\n    }\n\n    this.type = 'default';\n    this.status = options.status === undefined ? 200 : options.status;\n    this.ok = this.status >= 200 && this.status < 300;\n    this.statusText = 'statusText' in options ? options.statusText : 'OK';\n    this.headers = new Headers(options.headers);\n    this.url = options.url || '';\n    this._initBody(bodyInit);\n  }\n\n  Body.call(Response.prototype);\n\n  Response.prototype.clone = function() {\n    return new Response(this._bodyInit, {\n      status: this.status,\n      statusText: this.statusText,\n      headers: new Headers(this.headers),\n      url: this.url\n    })\n  };\n\n  Response.error = function() {\n    var response = new Response(null, {status: 0, statusText: ''});\n    response.type = 'error';\n    return response\n  };\n\n  var redirectStatuses = [301, 302, 303, 307, 308];\n\n  Response.redirect = function(url, status) {\n    if (redirectStatuses.indexOf(status) === -1) {\n      throw new RangeError('Invalid status code')\n    }\n\n    return new Response(null, {status: status, headers: {location: url}})\n  };\n\n  exports.DOMException = self.DOMException;\n  try {\n    new exports.DOMException();\n  } catch (err) {\n    exports.DOMException = function(message, name) {\n      this.message = message;\n      this.name = name;\n      var error = Error(message);\n      this.stack = error.stack;\n    };\n    exports.DOMException.prototype = Object.create(Error.prototype);\n    exports.DOMException.prototype.constructor = exports.DOMException;\n  }\n\n  function fetch(input, init) {\n    return new Promise(function(resolve, reject) {\n      var request = new Request(input, init);\n\n      if (request.signal && request.signal.aborted) {\n        return reject(new exports.DOMException('Aborted', 'AbortError'))\n      }\n\n      var xhr = new XMLHttpRequest();\n\n      function abortXhr() {\n        xhr.abort();\n      }\n\n      xhr.onload = function() {\n        var options = {\n          status: xhr.status,\n          statusText: xhr.statusText,\n          headers: parseHeaders(xhr.getAllResponseHeaders() || '')\n        };\n        options.url = 'responseURL' in xhr ? xhr.responseURL : options.headers.get('X-Request-URL');\n        var body = 'response' in xhr ? xhr.response : xhr.responseText;\n        resolve(new Response(body, options));\n      };\n\n      xhr.onerror = function() {\n        reject(new TypeError('Network request failed'));\n      };\n\n      xhr.ontimeout = function() {\n        reject(new TypeError('Network request failed'));\n      };\n\n      xhr.onabort = function() {\n        reject(new exports.DOMException('Aborted', 'AbortError'));\n      };\n\n      xhr.open(request.method, request.url, true);\n\n      if (request.credentials === 'include') {\n        xhr.withCredentials = true;\n      } else if (request.credentials === 'omit') {\n        xhr.withCredentials = false;\n      }\n\n      if ('responseType' in xhr && support.blob) {\n        xhr.responseType = 'blob';\n      }\n\n      request.headers.forEach(function(value, name) {\n        xhr.setRequestHeader(name, value);\n      });\n\n      if (request.signal) {\n        request.signal.addEventListener('abort', abortXhr);\n\n        xhr.onreadystatechange = function() {\n          // DONE (success or failure)\n          if (xhr.readyState === 4) {\n            request.signal.removeEventListener('abort', abortXhr);\n          }\n        };\n      }\n\n      xhr.send(typeof request._bodyInit === 'undefined' ? null : request._bodyInit);\n    })\n  }\n\n  fetch.polyfill = true;\n\n  if (!self.fetch) {\n    self.fetch = fetch;\n    self.Headers = Headers;\n    self.Request = Request;\n    self.Response = Response;\n  }\n\n  exports.Headers = Headers;\n  exports.Request = Request;\n  exports.Response = Response;\n  exports.fetch = fetch;\n\n  return exports;\n\n}({}));\n})(__self__);\ndelete __self__.fetch.polyfill\nexports = __self__.fetch // To enable: import fetch from 'cross-fetch'\nexports.default = __self__.fetch // For TypeScript consumers without esModuleInterop.\nexports.fetch = __self__.fetch // To enable: import {fetch} from 'cross-fetch'\nexports.Headers = __self__.Headers\nexports.Request = __self__.Request\nexports.Response = __self__.Response\nmodule.exports = exports\n","/*!\n * JavaScript Cookie v2.2.0\n * https://github.com/js-cookie/js-cookie\n *\n * Copyright 2006, 2015 Klaus Hartl & Fagner Brack\n * Released under the MIT license\n */\n;(function (factory) {\n\tvar registeredInModuleLoader = false;\n\tif (typeof define === 'function' && define.amd) {\n\t\tdefine(factory);\n\t\tregisteredInModuleLoader = true;\n\t}\n\tif (typeof exports === 'object') {\n\t\tmodule.exports = factory();\n\t\tregisteredInModuleLoader = true;\n\t}\n\tif (!registeredInModuleLoader) {\n\t\tvar OldCookies = window.Cookies;\n\t\tvar api = window.Cookies = factory();\n\t\tapi.noConflict = function () {\n\t\t\twindow.Cookies = OldCookies;\n\t\t\treturn api;\n\t\t};\n\t}\n}(function () {\n\tfunction extend () {\n\t\tvar i = 0;\n\t\tvar result = {};\n\t\tfor (; i < arguments.length; i++) {\n\t\t\tvar attributes = arguments[ i ];\n\t\t\tfor (var key in attributes) {\n\t\t\t\tresult[key] = attributes[key];\n\t\t\t}\n\t\t}\n\t\treturn result;\n\t}\n\n\tfunction init (converter) {\n\t\tfunction api (key, value, attributes) {\n\t\t\tvar result;\n\t\t\tif (typeof document === 'undefined') {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\t// Write\n\n\t\t\tif (arguments.length > 1) {\n\t\t\t\tattributes = extend({\n\t\t\t\t\tpath: '/'\n\t\t\t\t}, api.defaults, attributes);\n\n\t\t\t\tif (typeof attributes.expires === 'number') {\n\t\t\t\t\tvar expires = new Date();\n\t\t\t\t\texpires.setMilliseconds(expires.getMilliseconds() + attributes.expires * 864e+5);\n\t\t\t\t\tattributes.expires = expires;\n\t\t\t\t}\n\n\t\t\t\t// We're using \"expires\" because \"max-age\" is not supported by IE\n\t\t\t\tattributes.expires = attributes.expires ? attributes.expires.toUTCString() : '';\n\n\t\t\t\ttry {\n\t\t\t\t\tresult = JSON.stringify(value);\n\t\t\t\t\tif (/^[\\{\\[]/.test(result)) {\n\t\t\t\t\t\tvalue = result;\n\t\t\t\t\t}\n\t\t\t\t} catch (e) {}\n\n\t\t\t\tif (!converter.write) {\n\t\t\t\t\tvalue = encodeURIComponent(String(value))\n\t\t\t\t\t\t.replace(/%(23|24|26|2B|3A|3C|3E|3D|2F|3F|40|5B|5D|5E|60|7B|7D|7C)/g, decodeURIComponent);\n\t\t\t\t} else {\n\t\t\t\t\tvalue = converter.write(value, key);\n\t\t\t\t}\n\n\t\t\t\tkey = encodeURIComponent(String(key));\n\t\t\t\tkey = key.replace(/%(23|24|26|2B|5E|60|7C)/g, decodeURIComponent);\n\t\t\t\tkey = key.replace(/[\\(\\)]/g, escape);\n\n\t\t\t\tvar stringifiedAttributes = '';\n\n\t\t\t\tfor (var attributeName in attributes) {\n\t\t\t\t\tif (!attributes[attributeName]) {\n\t\t\t\t\t\tcontinue;\n\t\t\t\t\t}\n\t\t\t\t\tstringifiedAttributes += '; ' + attributeName;\n\t\t\t\t\tif (attributes[attributeName] === true) {\n\t\t\t\t\t\tcontinue;\n\t\t\t\t\t}\n\t\t\t\t\tstringifiedAttributes += '=' + attributes[attributeName];\n\t\t\t\t}\n\t\t\t\treturn (document.cookie = key + '=' + value + stringifiedAttributes);\n\t\t\t}\n\n\t\t\t// Read\n\n\t\t\tif (!key) {\n\t\t\t\tresult = {};\n\t\t\t}\n\n\t\t\t// To prevent the for loop in the first place assign an empty array\n\t\t\t// in case there are no cookies at all. Also prevents odd result when\n\t\t\t// calling \"get()\"\n\t\t\tvar cookies = document.cookie ? document.cookie.split('; ') : [];\n\t\t\tvar rdecode = /(%[0-9A-Z]{2})+/g;\n\t\t\tvar i = 0;\n\n\t\t\tfor (; i < cookies.length; i++) {\n\t\t\t\tvar parts = cookies[i].split('=');\n\t\t\t\tvar cookie = parts.slice(1).join('=');\n\n\t\t\t\tif (!this.json && cookie.charAt(0) === '\"') {\n\t\t\t\t\tcookie = cookie.slice(1, -1);\n\t\t\t\t}\n\n\t\t\t\ttry {\n\t\t\t\t\tvar name = parts[0].replace(rdecode, decodeURIComponent);\n\t\t\t\t\tcookie = converter.read ?\n\t\t\t\t\t\tconverter.read(cookie, name) : converter(cookie, name) ||\n\t\t\t\t\t\tcookie.replace(rdecode, decodeURIComponent);\n\n\t\t\t\t\tif (this.json) {\n\t\t\t\t\t\ttry {\n\t\t\t\t\t\t\tcookie = JSON.parse(cookie);\n\t\t\t\t\t\t} catch (e) {}\n\t\t\t\t\t}\n\n\t\t\t\t\tif (key === name) {\n\t\t\t\t\t\tresult = cookie;\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\n\t\t\t\t\tif (!key) {\n\t\t\t\t\t\tresult[name] = cookie;\n\t\t\t\t\t}\n\t\t\t\t} catch (e) {}\n\t\t\t}\n\n\t\t\treturn result;\n\t\t}\n\n\t\tapi.set = api;\n\t\tapi.get = function (key) {\n\t\t\treturn api.call(api, key);\n\t\t};\n\t\tapi.getJSON = function () {\n\t\t\treturn api.apply({\n\t\t\t\tjson: true\n\t\t\t}, [].slice.call(arguments));\n\t\t};\n\t\tapi.defaults = {};\n\n\t\tapi.remove = function (key, attributes) {\n\t\t\tapi(key, '', extend(attributes, {\n\t\t\t\texpires: -1\n\t\t\t}));\n\t\t};\n\n\t\tapi.withConverter = init;\n\n\t\treturn api;\n\t}\n\n\treturn init(function () {});\n}));\n","/**\n * Copyright (c) 2014-present, Facebook, Inc.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nvar runtime = (function (exports) {\n  \"use strict\";\n\n  var Op = Object.prototype;\n  var hasOwn = Op.hasOwnProperty;\n  var undefined; // More compressible than void 0.\n  var $Symbol = typeof Symbol === \"function\" ? Symbol : {};\n  var iteratorSymbol = $Symbol.iterator || \"@@iterator\";\n  var asyncIteratorSymbol = $Symbol.asyncIterator || \"@@asyncIterator\";\n  var toStringTagSymbol = $Symbol.toStringTag || \"@@toStringTag\";\n\n  function wrap(innerFn, outerFn, self, tryLocsList) {\n    // If outerFn provided and outerFn.prototype is a Generator, then outerFn.prototype instanceof Generator.\n    var protoGenerator = outerFn && outerFn.prototype instanceof Generator ? outerFn : Generator;\n    var generator = Object.create(protoGenerator.prototype);\n    var context = new Context(tryLocsList || []);\n\n    // The ._invoke method unifies the implementations of the .next,\n    // .throw, and .return methods.\n    generator._invoke = makeInvokeMethod(innerFn, self, context);\n\n    return generator;\n  }\n  exports.wrap = wrap;\n\n  // Try/catch helper to minimize deoptimizations. Returns a completion\n  // record like context.tryEntries[i].completion. This interface could\n  // have been (and was previously) designed to take a closure to be\n  // invoked without arguments, but in all the cases we care about we\n  // already have an existing method we want to call, so there's no need\n  // to create a new function object. We can even get away with assuming\n  // the method takes exactly one argument, since that happens to be true\n  // in every case, so we don't have to touch the arguments object. The\n  // only additional allocation required is the completion record, which\n  // has a stable shape and so hopefully should be cheap to allocate.\n  function tryCatch(fn, obj, arg) {\n    try {\n      return { type: \"normal\", arg: fn.call(obj, arg) };\n    } catch (err) {\n      return { type: \"throw\", arg: err };\n    }\n  }\n\n  var GenStateSuspendedStart = \"suspendedStart\";\n  var GenStateSuspendedYield = \"suspendedYield\";\n  var GenStateExecuting = \"executing\";\n  var GenStateCompleted = \"completed\";\n\n  // Returning this object from the innerFn has the same effect as\n  // breaking out of the dispatch switch statement.\n  var ContinueSentinel = {};\n\n  // Dummy constructor functions that we use as the .constructor and\n  // .constructor.prototype properties for functions that return Generator\n  // objects. For full spec compliance, you may wish to configure your\n  // minifier not to mangle the names of these two functions.\n  function Generator() {}\n  function GeneratorFunction() {}\n  function GeneratorFunctionPrototype() {}\n\n  // This is a polyfill for %IteratorPrototype% for environments that\n  // don't natively support it.\n  var IteratorPrototype = {};\n  IteratorPrototype[iteratorSymbol] = function () {\n    return this;\n  };\n\n  var getProto = Object.getPrototypeOf;\n  var NativeIteratorPrototype = getProto && getProto(getProto(values([])));\n  if (NativeIteratorPrototype &&\n      NativeIteratorPrototype !== Op &&\n      hasOwn.call(NativeIteratorPrototype, iteratorSymbol)) {\n    // This environment has a native %IteratorPrototype%; use it instead\n    // of the polyfill.\n    IteratorPrototype = NativeIteratorPrototype;\n  }\n\n  var Gp = GeneratorFunctionPrototype.prototype =\n    Generator.prototype = Object.create(IteratorPrototype);\n  GeneratorFunction.prototype = Gp.constructor = GeneratorFunctionPrototype;\n  GeneratorFunctionPrototype.constructor = GeneratorFunction;\n  GeneratorFunctionPrototype[toStringTagSymbol] =\n    GeneratorFunction.displayName = \"GeneratorFunction\";\n\n  // Helper for defining the .next, .throw, and .return methods of the\n  // Iterator interface in terms of a single ._invoke method.\n  function defineIteratorMethods(prototype) {\n    [\"next\", \"throw\", \"return\"].forEach(function(method) {\n      prototype[method] = function(arg) {\n        return this._invoke(method, arg);\n      };\n    });\n  }\n\n  exports.isGeneratorFunction = function(genFun) {\n    var ctor = typeof genFun === \"function\" && genFun.constructor;\n    return ctor\n      ? ctor === GeneratorFunction ||\n        // For the native GeneratorFunction constructor, the best we can\n        // do is to check its .name property.\n        (ctor.displayName || ctor.name) === \"GeneratorFunction\"\n      : false;\n  };\n\n  exports.mark = function(genFun) {\n    if (Object.setPrototypeOf) {\n      Object.setPrototypeOf(genFun, GeneratorFunctionPrototype);\n    } else {\n      genFun.__proto__ = GeneratorFunctionPrototype;\n      if (!(toStringTagSymbol in genFun)) {\n        genFun[toStringTagSymbol] = \"GeneratorFunction\";\n      }\n    }\n    genFun.prototype = Object.create(Gp);\n    return genFun;\n  };\n\n  // Within the body of any async function, `await x` is transformed to\n  // `yield regeneratorRuntime.awrap(x)`, so that the runtime can test\n  // `hasOwn.call(value, \"__await\")` to determine if the yielded value is\n  // meant to be awaited.\n  exports.awrap = function(arg) {\n    return { __await: arg };\n  };\n\n  function AsyncIterator(generator, PromiseImpl) {\n    function invoke(method, arg, resolve, reject) {\n      var record = tryCatch(generator[method], generator, arg);\n      if (record.type === \"throw\") {\n        reject(record.arg);\n      } else {\n        var result = record.arg;\n        var value = result.value;\n        if (value &&\n            typeof value === \"object\" &&\n            hasOwn.call(value, \"__await\")) {\n          return PromiseImpl.resolve(value.__await).then(function(value) {\n            invoke(\"next\", value, resolve, reject);\n          }, function(err) {\n            invoke(\"throw\", err, resolve, reject);\n          });\n        }\n\n        return PromiseImpl.resolve(value).then(function(unwrapped) {\n          // When a yielded Promise is resolved, its final value becomes\n          // the .value of the Promise<{value,done}> result for the\n          // current iteration.\n          result.value = unwrapped;\n          resolve(result);\n        }, function(error) {\n          // If a rejected Promise was yielded, throw the rejection back\n          // into the async generator function so it can be handled there.\n          return invoke(\"throw\", error, resolve, reject);\n        });\n      }\n    }\n\n    var previousPromise;\n\n    function enqueue(method, arg) {\n      function callInvokeWithMethodAndArg() {\n        return new PromiseImpl(function(resolve, reject) {\n          invoke(method, arg, resolve, reject);\n        });\n      }\n\n      return previousPromise =\n        // If enqueue has been called before, then we want to wait until\n        // all previous Promises have been resolved before calling invoke,\n        // so that results are always delivered in the correct order. If\n        // enqueue has not been called before, then it is important to\n        // call invoke immediately, without waiting on a callback to fire,\n        // so that the async generator function has the opportunity to do\n        // any necessary setup in a predictable way. This predictability\n        // is why the Promise constructor synchronously invokes its\n        // executor callback, and why async functions synchronously\n        // execute code before the first await. Since we implement simple\n        // async functions in terms of async generators, it is especially\n        // important to get this right, even though it requires care.\n        previousPromise ? previousPromise.then(\n          callInvokeWithMethodAndArg,\n          // Avoid propagating failures to Promises returned by later\n          // invocations of the iterator.\n          callInvokeWithMethodAndArg\n        ) : callInvokeWithMethodAndArg();\n    }\n\n    // Define the unified helper method that is used to implement .next,\n    // .throw, and .return (see defineIteratorMethods).\n    this._invoke = enqueue;\n  }\n\n  defineIteratorMethods(AsyncIterator.prototype);\n  AsyncIterator.prototype[asyncIteratorSymbol] = function () {\n    return this;\n  };\n  exports.AsyncIterator = AsyncIterator;\n\n  // Note that simple async functions are implemented on top of\n  // AsyncIterator objects; they just return a Promise for the value of\n  // the final result produced by the iterator.\n  exports.async = function(innerFn, outerFn, self, tryLocsList, PromiseImpl) {\n    if (PromiseImpl === void 0) PromiseImpl = Promise;\n\n    var iter = new AsyncIterator(\n      wrap(innerFn, outerFn, self, tryLocsList),\n      PromiseImpl\n    );\n\n    return exports.isGeneratorFunction(outerFn)\n      ? iter // If outerFn is a generator, return the full iterator.\n      : iter.next().then(function(result) {\n          return result.done ? result.value : iter.next();\n        });\n  };\n\n  function makeInvokeMethod(innerFn, self, context) {\n    var state = GenStateSuspendedStart;\n\n    return function invoke(method, arg) {\n      if (state === GenStateExecuting) {\n        throw new Error(\"Generator is already running\");\n      }\n\n      if (state === GenStateCompleted) {\n        if (method === \"throw\") {\n          throw arg;\n        }\n\n        // Be forgiving, per 25.3.3.3.3 of the spec:\n        // https://people.mozilla.org/~jorendorff/es6-draft.html#sec-generatorresume\n        return doneResult();\n      }\n\n      context.method = method;\n      context.arg = arg;\n\n      while (true) {\n        var delegate = context.delegate;\n        if (delegate) {\n          var delegateResult = maybeInvokeDelegate(delegate, context);\n          if (delegateResult) {\n            if (delegateResult === ContinueSentinel) continue;\n            return delegateResult;\n          }\n        }\n\n        if (context.method === \"next\") {\n          // Setting context._sent for legacy support of Babel's\n          // function.sent implementation.\n          context.sent = context._sent = context.arg;\n\n        } else if (context.method === \"throw\") {\n          if (state === GenStateSuspendedStart) {\n            state = GenStateCompleted;\n            throw context.arg;\n          }\n\n          context.dispatchException(context.arg);\n\n        } else if (context.method === \"return\") {\n          context.abrupt(\"return\", context.arg);\n        }\n\n        state = GenStateExecuting;\n\n        var record = tryCatch(innerFn, self, context);\n        if (record.type === \"normal\") {\n          // If an exception is thrown from innerFn, we leave state ===\n          // GenStateExecuting and loop back for another invocation.\n          state = context.done\n            ? GenStateCompleted\n            : GenStateSuspendedYield;\n\n          if (record.arg === ContinueSentinel) {\n            continue;\n          }\n\n          return {\n            value: record.arg,\n            done: context.done\n          };\n\n        } else if (record.type === \"throw\") {\n          state = GenStateCompleted;\n          // Dispatch the exception by looping back around to the\n          // context.dispatchException(context.arg) call above.\n          context.method = \"throw\";\n          context.arg = record.arg;\n        }\n      }\n    };\n  }\n\n  // Call delegate.iterator[context.method](context.arg) and handle the\n  // result, either by returning a { value, done } result from the\n  // delegate iterator, or by modifying context.method and context.arg,\n  // setting context.delegate to null, and returning the ContinueSentinel.\n  function maybeInvokeDelegate(delegate, context) {\n    var method = delegate.iterator[context.method];\n    if (method === undefined) {\n      // A .throw or .return when the delegate iterator has no .throw\n      // method always terminates the yield* loop.\n      context.delegate = null;\n\n      if (context.method === \"throw\") {\n        // Note: [\"return\"] must be used for ES3 parsing compatibility.\n        if (delegate.iterator[\"return\"]) {\n          // If the delegate iterator has a return method, give it a\n          // chance to clean up.\n          context.method = \"return\";\n          context.arg = undefined;\n          maybeInvokeDelegate(delegate, context);\n\n          if (context.method === \"throw\") {\n            // If maybeInvokeDelegate(context) changed context.method from\n            // \"return\" to \"throw\", let that override the TypeError below.\n            return ContinueSentinel;\n          }\n        }\n\n        context.method = \"throw\";\n        context.arg = new TypeError(\n          \"The iterator does not provide a 'throw' method\");\n      }\n\n      return ContinueSentinel;\n    }\n\n    var record = tryCatch(method, delegate.iterator, context.arg);\n\n    if (record.type === \"throw\") {\n      context.method = \"throw\";\n      context.arg = record.arg;\n      context.delegate = null;\n      return ContinueSentinel;\n    }\n\n    var info = record.arg;\n\n    if (! info) {\n      context.method = \"throw\";\n      context.arg = new TypeError(\"iterator result is not an object\");\n      context.delegate = null;\n      return ContinueSentinel;\n    }\n\n    if (info.done) {\n      // Assign the result of the finished delegate to the temporary\n      // variable specified by delegate.resultName (see delegateYield).\n      context[delegate.resultName] = info.value;\n\n      // Resume execution at the desired location (see delegateYield).\n      context.next = delegate.nextLoc;\n\n      // If context.method was \"throw\" but the delegate handled the\n      // exception, let the outer generator proceed normally. If\n      // context.method was \"next\", forget context.arg since it has been\n      // \"consumed\" by the delegate iterator. If context.method was\n      // \"return\", allow the original .return call to continue in the\n      // outer generator.\n      if (context.method !== \"return\") {\n        context.method = \"next\";\n        context.arg = undefined;\n      }\n\n    } else {\n      // Re-yield the result returned by the delegate method.\n      return info;\n    }\n\n    // The delegate iterator is finished, so forget it and continue with\n    // the outer generator.\n    context.delegate = null;\n    return ContinueSentinel;\n  }\n\n  // Define Generator.prototype.{next,throw,return} in terms of the\n  // unified ._invoke helper method.\n  defineIteratorMethods(Gp);\n\n  Gp[toStringTagSymbol] = \"Generator\";\n\n  // A Generator should always return itself as the iterator object when the\n  // @@iterator function is called on it. Some browsers' implementations of the\n  // iterator prototype chain incorrectly implement this, causing the Generator\n  // object to not be returned from this call. This ensures that doesn't happen.\n  // See https://github.com/facebook/regenerator/issues/274 for more details.\n  Gp[iteratorSymbol] = function() {\n    return this;\n  };\n\n  Gp.toString = function() {\n    return \"[object Generator]\";\n  };\n\n  function pushTryEntry(locs) {\n    var entry = { tryLoc: locs[0] };\n\n    if (1 in locs) {\n      entry.catchLoc = locs[1];\n    }\n\n    if (2 in locs) {\n      entry.finallyLoc = locs[2];\n      entry.afterLoc = locs[3];\n    }\n\n    this.tryEntries.push(entry);\n  }\n\n  function resetTryEntry(entry) {\n    var record = entry.completion || {};\n    record.type = \"normal\";\n    delete record.arg;\n    entry.completion = record;\n  }\n\n  function Context(tryLocsList) {\n    // The root entry object (effectively a try statement without a catch\n    // or a finally block) gives us a place to store values thrown from\n    // locations where there is no enclosing try statement.\n    this.tryEntries = [{ tryLoc: \"root\" }];\n    tryLocsList.forEach(pushTryEntry, this);\n    this.reset(true);\n  }\n\n  exports.keys = function(object) {\n    var keys = [];\n    for (var key in object) {\n      keys.push(key);\n    }\n    keys.reverse();\n\n    // Rather than returning an object with a next method, we keep\n    // things simple and return the next function itself.\n    return function next() {\n      while (keys.length) {\n        var key = keys.pop();\n        if (key in object) {\n          next.value = key;\n          next.done = false;\n          return next;\n        }\n      }\n\n      // To avoid creating an additional object, we just hang the .value\n      // and .done properties off the next function object itself. This\n      // also ensures that the minifier will not anonymize the function.\n      next.done = true;\n      return next;\n    };\n  };\n\n  function values(iterable) {\n    if (iterable) {\n      var iteratorMethod = iterable[iteratorSymbol];\n      if (iteratorMethod) {\n        return iteratorMethod.call(iterable);\n      }\n\n      if (typeof iterable.next === \"function\") {\n        return iterable;\n      }\n\n      if (!isNaN(iterable.length)) {\n        var i = -1, next = function next() {\n          while (++i < iterable.length) {\n            if (hasOwn.call(iterable, i)) {\n              next.value = iterable[i];\n              next.done = false;\n              return next;\n            }\n          }\n\n          next.value = undefined;\n          next.done = true;\n\n          return next;\n        };\n\n        return next.next = next;\n      }\n    }\n\n    // Return an iterator with no values.\n    return { next: doneResult };\n  }\n  exports.values = values;\n\n  function doneResult() {\n    return { value: undefined, done: true };\n  }\n\n  Context.prototype = {\n    constructor: Context,\n\n    reset: function(skipTempReset) {\n      this.prev = 0;\n      this.next = 0;\n      // Resetting context._sent for legacy support of Babel's\n      // function.sent implementation.\n      this.sent = this._sent = undefined;\n      this.done = false;\n      this.delegate = null;\n\n      this.method = \"next\";\n      this.arg = undefined;\n\n      this.tryEntries.forEach(resetTryEntry);\n\n      if (!skipTempReset) {\n        for (var name in this) {\n          // Not sure about the optimal order of these conditions:\n          if (name.charAt(0) === \"t\" &&\n              hasOwn.call(this, name) &&\n              !isNaN(+name.slice(1))) {\n            this[name] = undefined;\n          }\n        }\n      }\n    },\n\n    stop: function() {\n      this.done = true;\n\n      var rootEntry = this.tryEntries[0];\n      var rootRecord = rootEntry.completion;\n      if (rootRecord.type === \"throw\") {\n        throw rootRecord.arg;\n      }\n\n      return this.rval;\n    },\n\n    dispatchException: function(exception) {\n      if (this.done) {\n        throw exception;\n      }\n\n      var context = this;\n      function handle(loc, caught) {\n        record.type = \"throw\";\n        record.arg = exception;\n        context.next = loc;\n\n        if (caught) {\n          // If the dispatched exception was caught by a catch block,\n          // then let that catch block handle the exception normally.\n          context.method = \"next\";\n          context.arg = undefined;\n        }\n\n        return !! caught;\n      }\n\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n        var entry = this.tryEntries[i];\n        var record = entry.completion;\n\n        if (entry.tryLoc === \"root\") {\n          // Exception thrown outside of any try block that could handle\n          // it, so set the completion value of the entire function to\n          // throw the exception.\n          return handle(\"end\");\n        }\n\n        if (entry.tryLoc <= this.prev) {\n          var hasCatch = hasOwn.call(entry, \"catchLoc\");\n          var hasFinally = hasOwn.call(entry, \"finallyLoc\");\n\n          if (hasCatch && hasFinally) {\n            if (this.prev < entry.catchLoc) {\n              return handle(entry.catchLoc, true);\n            } else if (this.prev < entry.finallyLoc) {\n              return handle(entry.finallyLoc);\n            }\n\n          } else if (hasCatch) {\n            if (this.prev < entry.catchLoc) {\n              return handle(entry.catchLoc, true);\n            }\n\n          } else if (hasFinally) {\n            if (this.prev < entry.finallyLoc) {\n              return handle(entry.finallyLoc);\n            }\n\n          } else {\n            throw new Error(\"try statement without catch or finally\");\n          }\n        }\n      }\n    },\n\n    abrupt: function(type, arg) {\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n        var entry = this.tryEntries[i];\n        if (entry.tryLoc <= this.prev &&\n            hasOwn.call(entry, \"finallyLoc\") &&\n            this.prev < entry.finallyLoc) {\n          var finallyEntry = entry;\n          break;\n        }\n      }\n\n      if (finallyEntry &&\n          (type === \"break\" ||\n           type === \"continue\") &&\n          finallyEntry.tryLoc <= arg &&\n          arg <= finallyEntry.finallyLoc) {\n        // Ignore the finally entry if control is not jumping to a\n        // location outside the try/catch block.\n        finallyEntry = null;\n      }\n\n      var record = finallyEntry ? finallyEntry.completion : {};\n      record.type = type;\n      record.arg = arg;\n\n      if (finallyEntry) {\n        this.method = \"next\";\n        this.next = finallyEntry.finallyLoc;\n        return ContinueSentinel;\n      }\n\n      return this.complete(record);\n    },\n\n    complete: function(record, afterLoc) {\n      if (record.type === \"throw\") {\n        throw record.arg;\n      }\n\n      if (record.type === \"break\" ||\n          record.type === \"continue\") {\n        this.next = record.arg;\n      } else if (record.type === \"return\") {\n        this.rval = this.arg = record.arg;\n        this.method = \"return\";\n        this.next = \"end\";\n      } else if (record.type === \"normal\" && afterLoc) {\n        this.next = afterLoc;\n      }\n\n      return ContinueSentinel;\n    },\n\n    finish: function(finallyLoc) {\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n        var entry = this.tryEntries[i];\n        if (entry.finallyLoc === finallyLoc) {\n          this.complete(entry.completion, entry.afterLoc);\n          resetTryEntry(entry);\n          return ContinueSentinel;\n        }\n      }\n    },\n\n    \"catch\": function(tryLoc) {\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n        var entry = this.tryEntries[i];\n        if (entry.tryLoc === tryLoc) {\n          var record = entry.completion;\n          if (record.type === \"throw\") {\n            var thrown = record.arg;\n            resetTryEntry(entry);\n          }\n          return thrown;\n        }\n      }\n\n      // The context.catch method must only be called with a location\n      // argument that corresponds to a known catch block.\n      throw new Error(\"illegal catch attempt\");\n    },\n\n    delegateYield: function(iterable, resultName, nextLoc) {\n      this.delegate = {\n        iterator: values(iterable),\n        resultName: resultName,\n        nextLoc: nextLoc\n      };\n\n      if (this.method === \"next\") {\n        // Deliberately forget the last sent value so that we don't\n        // accidentally pass it on to the delegate.\n        this.arg = undefined;\n      }\n\n      return ContinueSentinel;\n    }\n  };\n\n  // Regardless of whether this script is executing as a CommonJS module\n  // or not, return the runtime object so that we can declare the variable\n  // regeneratorRuntime in the outer scope, which allows this module to be\n  // injected easily by `bin/regenerator --include-runtime script.js`.\n  return exports;\n\n}(\n  // If this script is executing as a CommonJS module, use module.exports\n  // as the regeneratorRuntime namespace. Otherwise create a new empty\n  // object. Either way, the resulting object will be used to initialize\n  // the regeneratorRuntime variable at the top of this file.\n  typeof module === \"object\" ? module.exports : {}\n));\n\ntry {\n  regeneratorRuntime = runtime;\n} catch (accidentalStrictMode) {\n  // This module should not be running in strict mode, so the above\n  // assignment should always work unless something is misconfigured. Just\n  // in case runtime.js accidentally runs in strict mode, we can escape\n  // strict mode using a global Function call. This could conceivably fail\n  // if a Content Security Policy forbids using Function, but in that case\n  // the proper solution is to fix the accidental strict mode problem. If\n  // you've misconfigured your bundler to force strict mode and applied a\n  // CSP to forbid Function, and you're not willing to fix either of those\n  // problems, please detail your unique predicament in a GitHub issue.\n  Function(\"r\", \"regeneratorRuntime = r\")(runtime);\n}\n","function E () {\n  // Keep this empty so it's easier to inherit from\n  // (via https://github.com/lipsmack from https://github.com/scottcorgan/tiny-emitter/issues/3)\n}\n\nE.prototype = {\n  on: function (name, callback, ctx) {\n    var e = this.e || (this.e = {});\n\n    (e[name] || (e[name] = [])).push({\n      fn: callback,\n      ctx: ctx\n    });\n\n    return this;\n  },\n\n  once: function (name, callback, ctx) {\n    var self = this;\n    function listener () {\n      self.off(name, listener);\n      callback.apply(ctx, arguments);\n    };\n\n    listener._ = callback\n    return this.on(name, listener, ctx);\n  },\n\n  emit: function (name) {\n    var data = [].slice.call(arguments, 1);\n    var evtArr = ((this.e || (this.e = {}))[name] || []).slice();\n    var i = 0;\n    var len = evtArr.length;\n\n    for (i; i < len; i++) {\n      evtArr[i].fn.apply(evtArr[i].ctx, data);\n    }\n\n    return this;\n  },\n\n  off: function (name, callback) {\n    var e = this.e || (this.e = {});\n    var evts = e[name];\n    var liveEvents = [];\n\n    if (evts && callback) {\n      for (var i = 0, len = evts.length; i < len; i++) {\n        if (evts[i].fn !== callback && evts[i].fn._ !== callback)\n          liveEvents.push(evts[i]);\n      }\n    }\n\n    // Remove event from queue to prevent memory leak\n    // Suggested by https://github.com/lazd\n    // Ref: https://github.com/scottcorgan/tiny-emitter/commit/c6ebfaa9bc973b33d110a84a307742b7cf94c953#commitcomment-5024910\n\n    (liveEvents.length)\n      ? e[name] = liveEvents\n      : delete e[name];\n\n    return this;\n  }\n};\n\nmodule.exports = E;\n"],"sourceRoot":""}